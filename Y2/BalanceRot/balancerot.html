<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Balancing of Rotating Masses - Interactive Lecture</title>
<!-- Import p5.js library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<!-- Import MathJax for LaTeX rendering -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
<!-- External CSS -->
<link href="/assets/css/main.css" rel="stylesheet"/>
<link href="/assets/css/simulations.css" rel="stylesheet"/>
<!-- JavaScript for simulations -->
<script defer="" src="balancerot.js"></script>
<style>
        /* Page-specific styles */
        .status-value.balanced {
            color: #28a745;
        }

        .status-value.unbalanced {
            color: #dc3545;
        }

        /* Floating control panel styles */
        .control-panel {
            position: relative;
            z-index: 10;
        }

        .control-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            background-color: rgba(0, 123, 255, 0.9);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            z-index: 11;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .control-toggle:hover {
            background-color: rgba(0, 100, 220, 0.9);
        }

        /* Small screens: floating, semi-transparent, concealable */
        @media (max-width: 768px) {
            .control-panel {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                max-width: 90%;
                background-color: rgba(249, 249, 249, 0.92);
                backdrop-filter: blur(8px);
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 4px 16px rgba(0,0,0,0.3);
                transition: transform 0.3s ease, opacity 0.3s ease;
                max-height: 60vh;
                overflow-y: auto;
            }

            .control-panel.hidden {
                transform: translateX(-50%) translateY(150%);
                opacity: 50;
                pointer-events: none;
            }

            .control-row {
                flex-direction: row;
                gap: 8px !important;
            }

            /* Pack controls more horizontally */
            .control-group {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .control-group h4 {
                grid-column: 1 / -1;
                margin: 8px 0 4px 0;
            }

            .slider-row {
                grid-column: span 1;
                flex-direction: row;
                gap: 2px;
            }

            .slider-row .slider-label {
                font-size: 10px;
                min-width: auto;
            }

            .slider-row input[type="range"] {
                width: 20%;
            }

            .slider-row input[type="number"] {
                width: 60px;
                padding: 2px;
                font-size: 10px;
            }

            .button-row {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .control-button {
                padding: 8px 12px;
                font-size: 12px;
            }
        }

        /* Large screens: positioned to the side */
        @media (min-width: 769px) {
            .tab-content {
                display: none;
            }

            .tab-content.active {
                display: grid;
                grid-template-columns: 2fr 340px;
                gap: 20px;
                align-items: start;
            }

            .simulation-grid {
                grid-column: 1;
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 5px;
            }

            .control-panel {
                grid-column: 2;
                grid-row: 1;
                background-color: #f9f9f9;
                padding: 5px;
                border-radius: 8px;
                max-height: 650px;
                overflow-y: auto;
                position: sticky;
                top: 0px;
            }

            .status-display {
                grid-column: 1 / -1;
            }

            .control-row {
                flex-direction: column;
                gap: 10px;
            }

            .slider-row {
                display: flex;
                flex-direction: row;
                gap: 4px;
            }

            .slider-row .slider-label {
                font-size: 12px;
                font-weight: 500;
            }

            .slider-row input[type="range"] {
                width: 30%;
            }

            .slider-row input[type="number"] {
                width: 60px;
                padding: 2px;
                font-size: 12px;
            }

            .button-row {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
<header>
<h1>Balancing of Rotating Masses</h1>
<p class="subtitle">Interactive Simulation &amp; Theory</p>
</header>
<div class="content-section">
<h2>Understanding Rotating Mass Unbalance</h2>
<h3>Static (Single Plane) Unbalance</h3>
<p>Static unbalance occurs when the centre of mass of a rotating system is displaced from the axis of rotation. Key characteristics:</p>
<ul>
<li>Can be detected when the rotor is stationary (heavy side rotates down)</li>
<li>Causes vibration perpendicular to the shaft axis</li>
<li>Can be corrected with a single balance mass in one plane</li>
</ul>
<div class="equation-box">
<p><strong>Centrifugal Force:</strong> \( F = m \cdot r \cdot \omega^2 \)</p>
<p>Where:</p>
<ul style="list-style: none;">
<li>\( m \) = unbalance mass (kg)</li>
<li>\( r \) = radius from axis (m)</li>
<li>\( \omega \) = angular velocity (rad/s)</li>
</ul>
</div>
<h3>Dynamic (Multi-Plane) Unbalance</h3>
<p>Dynamic unbalance occurs when there are multiple unbalanced masses in different axial planes along the shaft. This causes:</p>
<ul>
<li>Vibration in multiple planes</li>
<li>Varying reactions at the bearings</li>
<li>Both force and moment unbalance</li>
</ul>
<div class="key-point">
<p><strong>Important:</strong> Dynamic unbalance requires correction in at least two planes (two-plane balancing) to achieve both force and moment balance.</p>
</div>
</div>
<div class="simulation-container">
<h2>Interactive Simulations</h2>
<div class="tab-navigation">
<button class="tab-button active" onclick="switchTab(event,'single')">Single Plane Balancing</button>
<button class="tab-button" onclick="switchTab(event,'multi')">Multi-Plane Balancing</button>
</div>
<!-- Single Plane Simulation -->
<div class="tab-content active" id="single-tab">
<p>Explore single plane (static) unbalance. At 0 RPM, the shaft rotates to its stable position with the heavy side down.</p>
<div class="simulation-grid">
<div class="view-panel">
<span class="view-title">Side View</span>
<div id="single-side-view"></div>
</div>
<div class="view-panel">
<span class="view-title">Front View</span>
<div id="single-front-view"></div>
</div>
<div class="view-panel">
<span class="view-title">MR Polygon</span>
<div id="single-mr-diagram"></div>
</div>
<div class="view-panel">
<span class="view-title">Forces &amp; Reactions</span>
<div id="single-force-diagram"></div>
</div>
</div>
<div class="control-panel">
<div class="control-row">
<div class="control-group">
<h4>Shaft Speed</h4>
<div class="slider-row">
<span class="slider-label">RPM:</span>
<input id="single-rpm" max="180" min="0" step="10" type="range" value="0"/>
<input id="single-rpm-value" max="180" min="0" step="10" type="number" value="0"/>
</div>
</div>
</div>
<div class="control-row">
<div class="control-group">
<h4>Mass 1 (Red)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="single-mass1" max="150" min="0" step="5" type="range" value="50"/>
<input id="single-mass1-value" max="150" min="0" type="number" value="50"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="single-radius1" max="100" min="20" step="5" type="range" value="60"/>
<input id="single-radius1-value" max="100" min="20" type="number" value="60"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="single-angle1" max="360" min="0" step="1" type="range" value="0"/>
<input id="single-angle1-value" max="360" min="0" step="1" type="number" value="0"/>
</div><div class="slider-row"><span class="slider-label">Position (%):</span><input disabled="disabled" id="single-position1" max="85" min="15" step="5" type="range" value="50"/><input disabled="disabled" id="single-position1-value" max="85" min="15" type="number" value="50"/></div>
</div>
<div class="control-group">
<h4>Mass 2 (Blue)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="single-mass2" max="150" min="0" step="5" type="range" value="30"/>
<input id="single-mass2-value" max="150" min="0" type="number" value="30"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="single-radius2" max="100" min="20" step="5" type="range" value="80"/>
<input id="single-radius2-value" max="100" min="20" type="number" value="80"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="single-angle2" max="360" min="0" step="1" type="range" value="60"/>
<input id="single-angle2-value" max="360" min="0" step="1" type="number" value="60"/>
</div><div class="slider-row"><span class="slider-label">Position (%):</span><input disabled="disabled" id="single-position2" max="85" min="15" step="5" type="range" value="50"/><input disabled="disabled" id="single-position2-value" max="85" min="15" type="number" value="50"/></div>
</div>
<div class="control-group">
<h4>Mass 3 (Orange)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="single-mass3" max="150" min="0" step="5" type="range" value="40"/>
<input id="single-mass3-value" max="150" min="0" type="number" value="40"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="single-radius3" max="100" min="20" step="5" type="range" value="50"/>
<input id="single-radius3-value" max="100" min="20" type="number" value="50"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="single-angle3" max="360" min="0" step="1" type="range" value="120"/>
<input id="single-angle3-value" max="360" min="0" step="1" type="number" value="120"/>
</div><div class="slider-row"><span class="slider-label">Position (%):</span><input disabled="disabled" id="single-position3" max="85" min="15" step="5" type="range" value="50"/><input disabled="disabled" id="single-position3-value" max="85" min="15" type="number" value="50"/></div>
</div>
</div>
<div class="button-row">
<button class="control-button" id="single-pause">Pause</button>
<button class="control-button" id="single-slowmo">Slow-mo</button>
<button class="control-button" id="single-apply">Apply Balance</button>
<button class="control-button" id="single-reset">Reset</button>
</div>
</div>
<div class="status-display">
<div class="status-grid">
<div class="status-item" id="single-status">
<div class="status-label">System Status</div>
<div class="status-value unbalanced">Unbalanced</div>
</div>
<div class="status-item">
<div class="status-label">Total Force</div>
<div class="status-value" id="single-force">0 N</div>
</div>
<div class="status-item">
<div class="status-label">Balance Mass Required</div>
<div class="status-value" id="single-balance-mass">-- g</div>
</div>
<div class="status-item">
<div class="status-label">Balance Angle</div>
<div class="status-value" id="single-balance-angle">-- °</div>
</div>
</div>
</div>
</div>
<!-- Multi-Plane Simulation -->
<div class="tab-content" id="multi-tab">
<p>Explore multi-plane (dynamic) unbalance with three adjustable masses. Balance is achieved using two correction planes near the bearings.</p>
<div class="simulation-grid">
<div class="view-panel">
<span class="view-title">Side View</span>
<div id="multi-side-view"></div>
</div>
<div class="view-panel">
<span class="view-title">Front View</span>
<div id="multi-front-view"></div>
</div>
<div class="view-panel">
<span class="view-title">MR Polygon</span>
<div id="multi-mr-diagram"></div>
</div>
<div class="view-panel">
<span class="view-title">MRL Polygon</span>
<div id="multi-mrl-diagram"></div>
</div>
</div>
<div class="control-panel">
<div class="control-row">
<div class="control-group">
<h4>Shaft Speed</h4>
<div class="slider-row">
<span class="slider-label">RPM:</span>
<input id="multi-rpm" max="180" min="0" step="10" type="range" value="0"/>
<input id="multi-rpm-value" max="180" min="0" step="10" type="number" value="0"/>
</div>
</div>
</div>
<div class="control-row">
<div class="control-group">
<h4>Mass 1 (Red)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="multi-mass1" max="150" min="0" step="5" type="range" value="50"/>
<input id="multi-mass1-value" max="150" min="0" type="number" value="50"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="multi-radius1" max="100" min="20" step="5" type="range" value="60"/>
<input id="multi-radius1-value" max="100" min="20" type="number" value="60"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="multi-angle1" max="360" min="0" step="1" type="range" value="0"/>
<input id="multi-angle1-value" max="360" min="0" step="1" type="number" value="0"/>
</div>
<div class="slider-row">
<span class="slider-label">Position (%):</span>
<input id="multi-position1" max="85" min="15" step="5" type="range" value="25"/>
<input id="multi-position1-value" max="85" min="15" type="number" value="25"/>
</div>
</div>
<div class="control-group">
<h4>Mass 2 (Blue)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="multi-mass2" max="150" min="0" step="5" type="range" value="30"/>
<input id="multi-mass2-value" max="150" min="0" type="number" value="30"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="multi-radius2" max="100" min="20" step="5" type="range" value="80"/>
<input id="multi-radius2-value" max="100" min="20" type="number" value="80"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="multi-angle2" max="360" min="0" step="1" type="range" value="60"/>
<input id="multi-angle2-value" max="360" min="0" step="1" type="number" value="60"/>
</div>
<div class="slider-row">
<span class="slider-label">Position (%):</span>
<input id="multi-position2" max="85" min="15" step="5" type="range" value="50"/>
<input id="multi-position2-value" max="85" min="15" type="number" value="50"/>
</div>
</div>
<div class="control-group">
<h4>Mass 3 (Orange)</h4>
<div class="slider-row">
<span class="slider-label">Mass (g):</span>
<input id="multi-mass3" max="150" min="0" step="5" type="range" value="40"/>
<input id="multi-mass3-value" max="150" min="0" type="number" value="40"/>
</div>
<div class="slider-row">
<span class="slider-label">Radius (mm):</span>
<input id="multi-radius3" max="100" min="20" step="5" type="range" value="50"/>
<input id="multi-radius3-value" max="100" min="20" type="number" value="50"/>
</div>
<div class="slider-row">
<span class="slider-label">Angle (°):</span>
<input id="multi-angle3" max="360" min="0" step="1" type="range" value="120"/>
<input id="multi-angle3-value" max="360" min="0" step="1" type="number" value="120"/>
</div>
<div class="slider-row">
<span class="slider-label">Position (%):</span>
<input id="multi-position3" max="85" min="15" step="5" type="range" value="75"/>
<input id="multi-position3-value" max="85" min="15" type="number" value="75"/>
</div>
</div>
</div>
<div class="button-row">
<button class="control-button" id="multi-pause">Pause</button>
<button class="control-button" id="multi-slowmo">Slow-mo</button>
<button class="control-button" id="multi-apply">Apply Balance</button>
<button class="control-button" id="multi-reset">Reset</button>
</div>
</div>
<div class="status-display">
<div class="status-grid">
<div class="status-item" id="multi-status">
<div class="status-label">System Status</div>
<div class="status-value unbalanced">Unbalanced</div>
</div>
<div class="status-item">
<div class="status-label">Unbalance Force</div>
<div class="status-value" id="multi-force">0 N</div>
</div>
<div class="status-item">
<div class="status-label">Unbalance Moment</div>
<div class="status-value" id="multi-moment">0 Nm</div>
</div>
<div class="status-item">
<div class="status-label">Plane L Balance</div>
<div class="status-value" id="multi-balance-a">L: -- g @ -- °</div>
</div>
<div class="status-item">
<div class="status-label">Plane M Balance</div>
<div class="status-value" id="multi-balance-b">M: -- g @ -- °</div>
</div>
</div>
</div>
</div>
</div>
<div class="content-section">
<h2>Balancing Procedure</h2>
<h3>Single Plane Balancing</h3>
<ol>
<li>Identify the magnitude and angular position of unbalance</li>
<li>Calculate required balance mass: \( m_b = \frac{MR_{unbalance}}{r_b} \)</li>
<li>Place balance mass at 180° opposite to the resultant unbalance</li>
</ol>
<h3>Two Plane Balancing</h3>
<p>For complete dynamic balance, we must satisfy two conditions:</p>
<div class="equation-box">
<p><strong>Force Balance:</strong> \( \sum MR = 0 \)</p>
<p><strong>Moment Balance:</strong> \( \sum MR \cdot L = 0 \)</p>
</div>
<p>This requires balance masses in two correction planes, typically near the bearings for maximum effectiveness.</p>
</div>
<script>
        function switchTab(event, tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let content of tabContents) {
                content.classList.remove('active');
            }

            // Remove active class from all buttons
            const tabButtons = document.getElementsByClassName('tab-button');
            for (let button of tabButtons) {
                button.classList.remove('active');
            }

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.currentTarget.classList.add('active');

            // Trigger window resize event to recalculate canvas sizes
            setTimeout(() => {
                window.dispatchEvent(new Event('resize'));
            }, 50);
        }

        // Add control panel toggle buttons for small screens
        document.addEventListener('DOMContentLoaded', function() {
            const controlPanels = document.querySelectorAll('.control-panel');

            controlPanels.forEach(function(panel) {
                // Create toggle button
                const toggleBtn = document.createElement('button');
                toggleBtn.className = 'control-toggle';
                toggleBtn.textContent = 'Hide Controls';
                toggleBtn.setAttribute('aria-label', 'Toggle controls visibility');

                // Insert button at the beginning of panel
                panel.insertBefore(toggleBtn, panel.firstChild);

                // Add click handler
                toggleBtn.addEventListener('click', function() {
                    panel.classList.toggle('hidden');
                    toggleBtn.textContent = panel.classList.contains('hidden') ? 'Show Controls' : 'Hide Controls';
                });

                // Only show toggle button on small screens
                function updateToggleVisibility() {
                    if (window.innerWidth <= 768) {
                        toggleBtn.style.display = 'block';
                    } else {
                        toggleBtn.style.display = 'none';
                        panel.classList.remove('hidden');
                    }
                }

                updateToggleVisibility();
                window.addEventListener('resize', updateToggleVisibility);
            });
        });
    </script>
    <footer>
        <script src="/assets/common/footer.js"></script>
    </footer>
</body>
</html>