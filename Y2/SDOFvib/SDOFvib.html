<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Degree of Freedom Vibration - Interactive Lecture</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/problems.css">
    <link rel="stylesheet" href="/assets/css/quizzes.css">
    <link rel="stylesheet" href="/assets/css/simulations.css">
    <link rel="stylesheet" href="/assets/css/uicontrols.css">

    <!-- Import libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

    <!-- Import MathJax for LaTeX rendering -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* Page-specific styles */
        .sim-container {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: nowrap;
            overflow-x: auto;
        }

        #sketch-holder {
            flex: 0 0 200px;
            min-height: 500px;
            margin: 0;
            background-color: #f0f0f0;
            border: 2px solid #ccc;
        }

        #chart-container {
            flex: 1 1 auto;
            min-width: 300px;
        }

        #TimeHistory, #FRFamp, #FRFphase {
            width: 100%;
            margin-bottom: 10px;
        }

        /* Control panel grid layout for large screens */
        @media (min-width: 1025px) {
            .controls-grid-3col {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                align-items: flex-start;
            }

            /* Row 1: Labels and input fields */
            .control-item.label-input {
                grid-column: auto;
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .control-item.label-input label {
                font-weight: 600;
                margin-bottom: 0;
            }

            .control-item.label-input input[type="number"] {
                width: 100%;
                padding: 6px;
            }

            /* Row 2: Sliders */
            .control-item.slider-only {
                grid-column: auto;
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .control-item.slider-only input[type="range"] {
                width: 100%;
                margin: 0;
            }

            /* Row 3: Checkbox (spans full width) */
            .control-item.checkbox-item {
                grid-column: 1 / -1;
            }

            /* Row 4: Forcing frequency (spans full width) */
            .control-item.frequency-item {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: auto 1fr 1fr;
                gap: 15px;
                align-items: center;
            }

            .control-item.frequency-item label {
                white-space: nowrap;
                font-weight: 600;
            }

            .control-item.frequency-item input[type="number"] {
                width: 100%;
                padding: 6px;
            }

            .control-item.frequency-item input[type="range"] {
                width: 100%;
            }
        }

        /* Responsive adjustments - keep side by side always */
        @media (max-width: 900px) {
            #sketch-holder {
                flex: 0 0 150px;
                min-height: 400px;
            }

            #chart-container {
                min-width: 250px;
            }
        }

        @media (max-width: 576px) {
            #sketch-holder {
                flex: 0 0 120px;
                min-height: 300px;
            }

            #chart-container {
                min-width: 200px;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Single Degree of Freedom Vibration</h1>
        <p class="subtitle">Interactive Lecture & Simulation</p>
    </header>

    <div class="content-section">
        <h2>Understanding SDOF Vibration</h2>
            <p>Single Degree of Freedom (SDOF) vibration is a fundamental concept in mechanical engineering that describes the oscillatory motion of a system with one principal direction of movement. These systems are characterized by:</p>
            <ul>
                <li>One mass or inertial element</li>
                <li>One spring or stiffness element</li>
                <li>One damping element (optional)</li>
                <li>External forcing (optional)</li>
            </ul>

            <div class="key-point">
                <p>A single degree of freedom system can be represented by the following differential equation:</p>
                <p>\[m\ddot{x}+c\dot{x}+kx=F_0\cos(\omega t)\]</p>
                <p>Where:</p>
                <ul>
                    <li>\(m\) = mass [kg]</li>
                    <li>\(c\) = damping coefficient [Ns/m]</li>
                    <li>\(k\) = spring stiffness [N/m]</li>
                    <li>\(F_0\) = forcing amplitude [N]</li>
                    <li>\(\omega\) = forcing frequency [rad/s]</li>
                </ul>
            </div>

            <h3>Types of Damping in SDOF Systems</h3>
            <p>The behavior of a SDOF system depends critically on its damping ratio \(\zeta\), which is defined as:</p>
            <div class="equation-box">
                <p>\[\zeta = \frac{c}{c_{c}} = \frac{c}{2\sqrt{km}}\]</p>
            </div>
            <p>where \(c_c=2\sqrt{km}\) is called <em>critical damping ratio</em>.</p>
            
            <p>There are three damping conditions that lead to distinctly different system behaviors, depending on whether the damping coefficient is smaller, equal or greater than the critical damping ratio:</p>
            
            <ol>
                <li><strong>Underdamped</strong> (\(\zeta < 1\)): The system oscillates with gradually decreasing amplitude</li>
                <li><strong>Critically Damped</strong> (\(\zeta = 1\)): The system returns to equilibrium without oscillation in minimum time</li>
                <li><strong>Overdamped</strong> (\(\zeta > 1\)): The system returns to equilibrium without oscillation but more slowly than a critically damped system</li>
            </ol>
            
            <h3>Effect of Damping on Response</h3>
            <p>Damping has several important effects on SDOF systems:</p>
            <ol>
                <li>Reduces the peak amplitude at resonance</li>
                <li>Broadens the resonance peak</li>
                <li>Limits the maximum amplitude ratio to \(1/(2\zeta)\) at resonance</li>
                <li>Creates a phase shift that varies from 0° at low frequencies to -180° at high frequencies, passing through -90° at resonance</li>
            </ol>
            
            <h3>Natural Frequency and Damped Natural Frequency</h3>
            <div class="equation-box">
                <p>Natural frequency (pulsation): \(\omega_n = \sqrt{\frac{k}{m}}\) [rad/s]</p>
                <p>Natural frequency: \(f_n = \frac{1}{2\pi}\omega_n\) [Hz]</p>
                <p>Damped/transient natural pulsation: \(\omega_d = \omega_n\sqrt{1-\zeta^2}\) [rad/s]</p>
                <p>Damped/transient natural frequency: \(f_d = \frac{1}{2\pi}\omega_d\) [Hz]</p>
            </div>
            
            <h3>Free Vibration Response</h3>
            <p>For an underdamped system (\(\zeta < 1\)) with zero initial velocity and an initial displacement \(x_0\), the free vibration response is:</p>
            <div class="equation-box">
                <p>\[x(t) = x_0 e^{-\zeta \omega_n t} \cos(\omega_d t)\]</p>
            </div>
            
            <h3>Forced Vibration Response</h3>
            <p>When a harmonic force \(F(t) = F_0 \cos(\omega t)\) is applied to the system, the steady-state response is:</p>
            <div class="equation-box">
                <p>\[x(t) = X \cos(\omega t - \theta)\]</p>
                <p>Where:</p>
                <p>\[X = \frac{F_0/k}{\sqrt{(1-\rho^2)^2 + (2\zeta\rho)^2}}\]</p>
                <p>\[\theta = \tan^{-1}\left(\frac{2\zeta\rho}{1-\rho^2}\right)\]</p>
                <p>\[\rho=\omega/\omega_n\]</p>
            </div>
            
            <div class="key-point">
                <p><strong>Resonance:</strong> When the forcing frequency approaches the natural frequency (\(\omega \approx \omega_n\)) the amplitude of vibration becomes very large, especially for lightly damped systems. This phenomenon is called resonance and can lead to catastrophic failures in engineering structures if not properly managed.</p>
                <p>The resonance frequency \(\omega_r\) for a SDOF system is:</p>
                <p>\[\omega_R=\omega_n\sqrt{1-2\zeta^2}\]</p>
            </div>

            <h3>Frequency Response Function</h3>
            <p>The Frequency Response Function is a fundamental tool in vibration analysis that shows how a system responds to different forcing frequencies:</p>
            <div class="equation-box">
                <p>\[H(\omega) = \frac{X(\omega)}{F(\omega)} = \frac{1/k}{\sqrt{[1-(\omega/\omega_n)^2]^2 + [2\zeta(\omega/\omega_n)]^2}}\]</p>
            </div>

            <p>The FRF has two components:</p>
            <ul>
                <li><strong>Amplitude ratio:</strong> Shows how the amplitude of response varies with frequency</li>
                <li><strong>Phase angle:</strong> Shows the phase shift between the input force and output displacement</li>
            </ul>
        </div>

        <div class="simulation-section">
            <h2>Interactive Simulation</h2>
            <p>Experiment with different parameters to see how they affect the behavior of a SDOF system:</p>
            
            <div class="controls-grid-3col">
                <!-- Row 1: Labels and input fields -->
                <div class="control-item label-input">
                    <label for="mass-value">Mass (m) [kg]:</label>
                    <input type="number" id="mass-value" min="1" max="10" step="0.1" value="1.0">
                </div>

                <div class="control-item label-input">
                    <label for="stiffness-value">Stiffness (k) [N/m]:</label>
                    <input type="number" id="stiffness-value" min="1000" max="10000" step="100" value="5000">
                </div>

                <div class="control-item label-input">
                    <label for="damping-value">Damping (c) [Ns/m]:</label>
                    <input type="number" id="damping-value" min="0" max="200" step="1" value="10">
                </div>

                <!-- Row 2: Sliders -->
                <div class="control-item slider-only">
                    <input type="range" id="mass-slider" min="1" max="10" step="0.1" value="1.0">
                </div>

                <div class="control-item slider-only">
                    <input type="range" id="stiffness-slider" min="1000" max="10000" step="100" value="5000">
                </div>

                <div class="control-item slider-only">
                    <input type="range" id="damping-slider" min="0" max="200" step="1" value="10" class="underdamped">
                </div>

                <!-- Row 3: Checkbox -->
                <div class="control-item checkbox-item">
                    <label for="forcing-toggle">
                        <input type="checkbox" id="forcing-toggle">
                        Forced Vibration
                    </label>
                </div>

                <!-- Row 4: Forcing frequency -->
                <div class="control-item frequency-item" id="frequency-control">
                    <label for="frequency-value">Forcing Freq (f) [Hz]:</label>
                    <input type="number" id="frequency-value" min="0" max="20" step="0.01" value="5.0" disabled>
                    <input type="range" id="frequency-slider" min="0" max="20" step="0.01" value="5.0" disabled>
                </div>
            </div>
            
            
            <div id="simulation-display">
            <div class="sim-container">
                <div id="sketch-holder">
                    <!-- Our sketch will go here! -->
                </div>
                
                <div id="chart-container">
                    <div id="TimeHistory"></div>
                    <div id="FRFamp"></div>
                    <div id="FRFphase"></div>
                </div>
            </div>
            </div>

            <!-- Hidden system info - displayed in canvas overlay -->
            <div id="system-info" style="display: none;">
                <p><strong>Natural Frequency (fn):</strong> <span id="natural-freq">3.56</span> Hz</p>
                <p><strong>Damped Natural Frequency (fd):</strong> <span id="damped-freq">3.53</span> Hz</p>
                <p><strong>Damping Ratio (ζ):</strong> <span id="damping-ratio">0.21</span></p>
                <p><strong>Critical Damping (cc):</strong> <span id="critical-damping">44.72</span> Ns/m</p>
                <p><strong>System Type:</strong> <span id="system-type">Underdamped</span></p>
            </div>

            <h3>Observations:</h3>
            <ul>
                <li>In free vibration (\(F_0 = 0)\), the system oscillates at its damped natural frequency</li>
                <li>As damping increases, the oscillations decay more rapidly</li>
                <li>At critical damping, the system returns to equilibrium without oscillation</li>
                <li>When forced, the system amplitude peaks near the natural frequency (resonance)</li>
                <li>The phase shift changes from 0° (displacement in the same direction as forcing) to -180° (displacement in opposite direction of forcing) as the forcing frequency passes through resonance</li>
            </ul>
    </div>

    <div class="content-section">
        <h2>Engineering Applications</h2>
        <p>Single degree of freedom vibration analysis is crucial across mechanical and structural engineering. SDOF models are used extensively to analyze and design various systems:</p>

        <h3>Structural Engineering</h3>
        <ul>
            <li><strong>Earthquake Engineering:</strong> Buildings and bridges are modeled as SDOF systems to predict their response to seismic excitation and design damping systems.</li>
            <li><strong>Vibration Isolation Platforms:</strong> Sensitive equipment like electron microscopes and precision machine tools require isolation mounts designed using SDOF principles.</li>
            <li><strong>Damping System Design:</strong> The Taipei 101 skyscraper employs a 660-ton tuned mass damper (TMD) that acts as a SDOF system, absorbing vibrational energy and significantly reducing building motion during strong winds and earthquakes.</li>
        </ul>

        <h3>Mechanical Engineering</h3>
        <ul>
            <li><strong>Vehicle Suspension:</strong> Quarter-car models use SDOF analysis to optimize spring stiffness and damping for ride comfort and handling.</li>
            <li><strong>Engine Mounts:</strong> Designed using SDOF principles to isolate vibration from powertrains.</li>
            <li><strong>Vibration Absorbers:</strong> Tuned mass dampers and dynamic vibration absorbers use SDOF theory to suppress unwanted oscillations.</li>
            <li><strong>Machine Foundation Design:</strong> Pumps, motors, and rotating machinery foundations are analyzed as SDOF systems to prevent resonance and excessive vibration.</li>
        </ul>

        <h3>Aerospace Engineering</h3>
        <ul>
            <li><strong>Flutter Analysis:</strong> Wing and control surface vibrations are initially analyzed using SDOF models.</li>
            <li><strong>Landing Gear Design:</strong> Aircraft landing gear uses SDOF modeling for dynamic analysis and shock absorption.</li>
            <li><strong>Satellite Appendage Modeling:</strong> Solar panels and antennas are modeled as SDOF systems for deployment analysis.</li>
        </ul>

        <h3>Manufacturing</h3>
        <ul>
            <li><strong>Impact Operations:</strong> Impact hammers, drop forges, and stamping presses are modeled as SDOF systems to predict forces and deflections.</li>
        </ul>
    </div>

    <div class="content-section">
        <h2>Summary of Key Equations</h2>
        <div class="equation-table">
            <table>
                <thead>
                    <tr>
                        <th>Concept</th>
                        <th>Equation</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Natural Frequency</td>
                    <td>\(\omega_n = \sqrt{\frac{k}{m}}\)</td>
                    <td>Undamped natural frequency</td>
                </tr>
                <tr>
                    <td>Damping Ratio</td>
                    <td>\(\zeta = \frac{c}{c_c} = \frac{c}{2\sqrt{km}}\)</td>
                    <td>Fraction of critical damping</td>
                </tr>
                <tr>
                    <td>Damped Frequency</td>
                    <td>\(\omega_d = \omega_n\sqrt{1-\zeta^2}\)</td>
                    <td>Frequency with damping</td>
                </tr>
                <tr>
                    <td>Free Response</td>
                    <td>\(x(t) = Xe^{-\zeta\omega_n t}\cos(\omega_d t - \phi)\)</td>
                    <td>Underdamped free vibration</td>
                </tr>
                <tr>
                    <td>Forced Response</td>
                    <td>\(X = \frac{F_0/k}{\sqrt{(1-\rho^2)^2+(2\zeta \rho)^2}}\)</td>
                    <td>Steady-state amplitude</td>
                </tr>
                <tr>
                    <td>Frequency Ratio</td>
                    <td>\(\rho = \frac{\omega}{\omega_n}\)</td>
                    <td>Excitation to natural frequency</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="content-section">
        <h2>Practice Problems</h2>

        <div class="practice-problems">
            <h3>Problem 1: Natural Frequency Calculation</h3>
            <p>A machine component has a mass of 5 kg and is supported by a spring with stiffness 8000 N/m. Calculate:</p>
            <ol type="a">
                <li>The natural frequency in rad/s</li>
                <li>The natural frequency in Hz</li>
                <li>The period of oscillation</li>
            </ol>
            <p class="toggle-section" onclick="toggleSolution('solution1')">Show Solution</p>
            <div id="solution1" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>a) The natural frequency in rad/s:</p>
                <p>\(\omega_n = \sqrt{\frac{k}{m}} = \sqrt{\frac{8000}{5}} = \sqrt{1600} = 40\) rad/s</p>

                <p>b) The natural frequency in Hz:</p>
                <p>\(f_n = \frac{\omega_n}{2\pi} = \frac{40}{2\pi} = 6.37\) Hz</p>

                <p>c) The period of oscillation:</p>
                <p>\(T = \frac{1}{f_n} = \frac{1}{6.37} = 0.157\) seconds</p>
            </div>
        </div>

        <div class="practice-problems">
            <h3>Problem 2: Damping Ratio Determination</h3>
            <p>A vibrating system with mass 2 kg and spring stiffness 1800 N/m has a logarithmic decrement of 0.5. Calculate:</p>
            <ol type="a">
                <li>The damping ratio</li>
                <li>The damping coefficient</li>
                <li>The critical damping coefficient</li>
                <li>Classify the system as underdamped, critically damped, or overdamped</li>
            </ol>
            <p class="toggle-section" onclick="toggleSolution('solution2')">Show Solution</p>
            <div id="solution2" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>a) The damping ratio:</p>
                <p>The logarithmic decrement \(\delta = 0.5\)</p>
                <p>\(\zeta = \frac{\delta}{\sqrt{4\pi^2 + \delta^2}} = \frac{0.5}{\sqrt{4\pi^2 + 0.5^2}} = \frac{0.5}{\sqrt{39.74}} = \frac{0.5}{6.3} = 0.079\)</p>

                <p>b) The damping coefficient:</p>
                <p>\(\omega_n = \sqrt{\frac{k}{m}} = \sqrt{\frac{1800}{2}} = 30\) rad/s</p>
                <p>\(c = 2\zeta\omega_n m = 2 \times 0.079 \times 30 \times 2 = 9.48\) Ns/m</p>

                <p>c) The critical damping coefficient:</p>
                <p>\(c_{critical} = 2m\omega_n = 2 \times 2 \times 30 = 120\) Ns/m</p>

                <p>d) Since \(\zeta = 0.079 < 1\), the system is <strong>underdamped</strong>.</p>
            </div>
        </div>

        <div class="practice-problems">
            <h3>Problem 3: Resonance and Amplitude</h3>
            <p>A machine with mass 100 kg is mounted on a spring with stiffness \(k = 4 \times 10^5\) N/m and a damper with damping coefficient \(c = 1000\) Ns/m. The machine is subjected to a harmonic force with amplitude \(F_0 = 5000\) N. Calculate:</p>
            <ol type="a">
                <li>The natural frequency</li>
                <li>The amplitude of vibration at resonance</li>
                <li>The amplitude of vibration when the forcing frequency is 10 Hz</li>
            </ol>
            <p class="toggle-section" onclick="toggleSolution('solution3')">Show Solution</p>
            <div id="solution3" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>a) The natural frequency:</p>
                <p>\(\omega_n = \sqrt{\frac{k}{m}} = \sqrt{\frac{4 \times 10^5}{100}} = \sqrt{4000} = 63.25\) rad/s</p>
                <p>\(f_n = \frac{\omega_n}{2\pi} = \frac{63.25}{2\pi} = 10.07\) Hz</p>

                <p>b) The amplitude of vibration at resonance:</p>
                <p>First, calculate the damping ratio:</p>
                <p>\(c_{critical} = 2m\omega_n = 2 \times 100 \times 63.25 = 12650\) Ns/m</p>
                <p>\(\zeta = \frac{c}{c_{critical}} = \frac{1000}{12650} = 0.079\)</p>

                <p>At resonance \(\omega = \omega_R\)</p>
                <p>\(\omega_R=\omega_n\sqrt{1-2\zeta^2}=62.85\) rad/s, the amplitude is:</p>
                <p>\(X = \frac{F_0/k}{2\zeta\sqrt{1-\zeta^2}} = \frac{5000/(4 \times 10^5)}{2 \times 0.079 \times \sqrt{1-0.079^2}} = \frac{0.0125}{0.158} = 0.079\) m (or 79 mm)</p>

                <p>c) The amplitude of vibration when the forcing frequency is 10 Hz:</p>
                <p>\(\omega = 2\pi f = 2\pi \times 10 = 62.83\) rad/s</p>
                <p>\(\rho = \frac{\omega}{\omega_n} = \frac{62.83}{63.25} = 0.993\)</p>

                <p>\(X = \frac{F_0/k}{\sqrt{[1-\rho^2]^2 + [2\zeta \rho]^2}} = \frac{0.0125}{\sqrt{[1-0.993^2]^2 + [2 \times 0.079 \times 0.993]^2}}\)</p>
                <p>\(X = \frac{0.0125}{\sqrt{[0.014]^2 + [0.157]^2}} = \frac{0.0125}{0.158} = 0.079\) m (or 79 mm)</p>

                <p>Note: Since 10 Hz is very close to the resonant frequency (10.07 Hz), the amplitude is nearly the same as at exact resonance.</p>
            </div>
        </div>
    </div>

    <div class="content-section">
        <h2>Knowledge Check Quiz</h2>
        <div class="quiz-container">

            <div class="quiz-question">
                <h3>Question 1: What happens to the natural frequency of a SDOF system if the mass is doubled while keeping the spring stiffness constant?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q1" value="a"> The natural frequency doubles</label>
                    <label><input type="radio" name="q1" value="b"> The natural frequency decreases by a factor of √2</label>
                    <label><input type="radio" name="q1" value="c"> The natural frequency remains unchanged</label>
                    <label><input type="radio" name="q1" value="d"> The natural frequency increases by a factor of √2</label>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Question 2: A system with damping ratio ζ = 0.05 is best described as:</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q2" value="a"> Overdamped</label>
                    <label><input type="radio" name="q2" value="b"> Critically damped</label>
                    <label><input type="radio" name="q2" value="c"> Underdamped</label>
                    <label><input type="radio" name="q2" value="d"> Undamped</label>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Question 3: What is the phase angle between the forcing function and the displacement response at resonance for an underdamped system?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q3" value="a"> 0°</label>
                    <label><input type="radio" name="q3" value="b"> 90°</label>
                    <label><input type="radio" name="q3" value="c"> 180°</label>
                    <label><input type="radio" name="q3" value="d"> 45°</label>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Question 4: If a SDOF system has a natural frequency of 8 Hz and a damping ratio of 0.2, what is its damped natural frequency?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q4" value="a"> 8 Hz</label>
                    <label><input type="radio" name="q4" value="b"> 7.84 Hz</label>
                    <label><input type="radio" name="q4" value="c"> 6.4 Hz</label>
                    <label><input type="radio" name="q4" value="d"> 10 Hz</label>
                </div>
            </div>

            <div class="quiz-question">
                <h3>Question 5: Which of the following statements about resonance is TRUE?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q5" value="a"> Resonance occurs when the forcing frequency equals twice the natural frequency</label>
                    <label><input type="radio" name="q5" value="b"> At resonance, the amplitude of vibration is minimum</label>
                    <label><input type="radio" name="q5" value="c"> Increasing damping increases the peak amplitude at resonance</label>
                    <label><input type="radio" name="q5" value="d"> For an underdamped system, the amplitude at resonance is inversely proportional to the damping ratio</label>
                </div>
            </div>

            <button id="submit-quiz">Submit Quiz</button>
            <div id="quiz-results"></div>
        </div>
    </div>

    <script>
// toggleSolution function now loaded from /assets/common/problems.js

        // Quiz handler for SDOF Vibration
        document.getElementById('submit-quiz').addEventListener('click', function() {
            const answers = {
                q1: 'b',  // Natural frequency decreases by √2 when mass doubles
                q2: 'c',  // ζ = 0.05 < 1, so underdamped
                q3: 'b',  // Phase angle at resonance is 90°
                q4: 'b',  // fd = fn√(1-ζ²) = 8√(1-0.04) = 7.84 Hz
                q5: 'd'   // Amplitude at resonance is inversely proportional to damping ratio
            };

            let score = 0;
            let totalQuestions = Object.keys(answers).length;
            let resultsHTML = '<h3>Quiz Results:</h3>';

            for (let question in answers) {
                const selectedOption = document.querySelector(`input[name="${question}"]:checked`);
                const correctAnswer = answers[question];

                if (selectedOption) {
                    if (selectedOption.value === correctAnswer) {
                        score++;
                        resultsHTML += `<p style="color: #28a745; font-weight: bold;">${question.toUpperCase()}: Correct! ✓</p>`;
                    } else {
                        resultsHTML += `<p style="color: #dc3545; font-weight: bold;">${question.toUpperCase()}: Incorrect ✗</p>`;
                    }
                } else {
                    resultsHTML += `<p style="color: #333;">${question.toUpperCase()}: Not answered</p>`;
                }
            }

            const percentage = ((score / totalQuestions) * 100).toFixed(0);
            resultsHTML = `<p style="font-size: 1.2em; font-weight: bold;">You scored ${score} out of ${totalQuestions} (${percentage}%)</p>` + resultsHTML;

            document.getElementById('quiz-results').innerHTML = resultsHTML;
        });

        // Create a new instance of the simulation when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Update parameter display values when sliders are moved
            const massSlider = document.getElementById('mass-slider');
            const massValue = document.getElementById('mass-value');
            const stiffnessSlider = document.getElementById('stiffness-slider');
            const stiffnessValue = document.getElementById('stiffness-value');
            const dampingSlider = document.getElementById('damping-slider');
            const dampingValue = document.getElementById('damping-value');
            const frequencySlider = document.getElementById('frequency-slider');
            const frequencyValue = document.getElementById('frequency-value');
            const forcingToggle = document.getElementById('forcing-toggle');

            // Sync slider to number input
            massSlider.addEventListener('input', function() {
                massValue.value = parseFloat(this.value).toFixed(1);
                updateCriticalDampingMarker();
            });

            // Sync number input to slider
            massValue.addEventListener('input', function() {
                massSlider.value = this.value;
                updateCriticalDampingMarker();
            });

            stiffnessSlider.addEventListener('input', function() {
                stiffnessValue.value = this.value;
                updateCriticalDampingMarker();
            });

            stiffnessValue.addEventListener('input', function() {
                stiffnessSlider.value = this.value;
                updateCriticalDampingMarker();
            });

            dampingSlider.addEventListener('input', function() {
                dampingValue.value = parseFloat(this.value).toFixed(1);
            });

            dampingValue.addEventListener('input', function() {
                dampingSlider.value = this.value;
            });

            frequencySlider.addEventListener('input', function() {
                frequencyValue.value = parseFloat(this.value).toFixed(2);
            });

            frequencyValue.addEventListener('input', function() {
                frequencySlider.value = this.value;
            });
            
            // Function to update the critical damping marker position
            function updateCriticalDampingMarker() {
                const mass = parseFloat(massSlider.value);
                const stiffness = parseFloat(stiffnessSlider.value);
                const criticalDamping = 2 * Math.sqrt(stiffness * mass);

                // Update critical damping marker (if it exists)
                const criticalMarker = document.getElementById('critical-damping-marker');
                if (criticalMarker) {
                    const dampingSlider = document.getElementById('damping-slider');

                    // Calculate position as percentage of slider width
                    const sliderMin = parseFloat(dampingSlider.min);
                    const sliderMax = parseFloat(dampingSlider.max);
                    const percentage = ((criticalDamping - sliderMin) / (sliderMax - sliderMin)) * 100;

                    // Ensure the marker stays within the slider bounds
                    const clampedPercentage = Math.min(Math.max(percentage, 0), 100);

                    // Position the marker
                    criticalMarker.style.left = `${clampedPercentage}%`;
                }
            }

            // Initialize marker position
            updateCriticalDampingMarker();
        });
    </script>
    <footer>
        <script src="/assets/common/footer.js"></script>
    </footer>

    <!-- Common JavaScript functions -->
    <script src="/assets/common/problems.js"></script>
    <script src="/assets/common/quizzes.js"></script>

    <!-- Main simulation script - load last to ensure DOM and libraries are ready -->
    <script src="SDOFvib.js"></script>
</body>
</html>