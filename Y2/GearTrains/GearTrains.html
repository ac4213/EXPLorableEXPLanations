<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gear Trains - Interactive Lecture</title>
    <!-- Import p5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <!-- Import MathJax for LaTeX rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <!-- External CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/simulations.css">
    <style>
        /* Page-specific styles */
        .gear-controls {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .simulation-canvas {
            border: 2px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
            background-color: #f5f5f5;
        }

        .info-display {
            background-color: #e6f7ff;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }

        .info-display p {
            margin: 5px 0;
        }

        .gear-type-selector {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .gear-type-button {
            padding: 8px 15px;
            background-color: #e0e0e0;
            border: 2px solid transparent;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .gear-type-button.active {
            background-color: #ffd700;
            border-color: #ffb300;
        }

        .iso-note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
            font-size: 12px;
        }
    </style>
    <!-- Gear simulations script -->
    <script src="GearTrains.js"></script>
</head>

<body>
    <header>
        <h1>Gear Trains</h1>
        <p class="subtitle">Interactive Lecture & Simulation</p>
    </header>

    <div class="content-section">
        <h2>Understanding Gear Trains</h2>
        <p>Gear trains are mechanical systems composed of two or more gears that mesh together to transmit rotational motion and power. They are fundamental components in mechanical engineering, used to:</p>
        <ul>
            <li>Change the speed of rotation</li>
            <li>Change the direction of rotation</li>
            <li>Change the torque (rotational force)</li>
            <li>Transfer motion between non-parallel shafts</li>
        </ul>

        <div class="key-point">
            <p>The gear ratio is the fundamental concept in gear trains. It determines the relationship between input and output speeds and torques.</p>
        </div>

        <h3>Key Concepts</h3>
        <div class="equation-box">
            <p>Gear Ratio: \(GR = \frac{N_{driven}}{N_{driver}} = \frac{\omega_{driver}}{\omega_{driven}} = \frac{T_{driven}}{T_{driver}}\)</p>
            <p>Where:</p>
            <ul>
                <li>\(N\) = Number of teeth</li>
                <li>\(\omega\) = Angular velocity</li>
                <li>\(T\) = Torque</li>
            </ul>
        </div>
    </div>

    <div class="simulation-section">
        <h2>Simulation 1: ISO Standard Involute Gear Tooth Profile</h2>
        <p>The involute curve is the standard profile for gear teeth. Watch how the curve is generated as if a string unwraps from a base circle. This simulation follows ISO standards for gear geometry.</p>
        
        <div id="involute-simulation"></div>
        
        <div class="gear-controls">
            <div class="control-row">
                <label>ISO Module (mm):</label>
                <select id="iso-module">
                    <option value="4" selected>4.0</option>
                    <option value="5">5.0</option>
                    <option value="6">6.0</option>
                    <option value="8">8.0</option>
                    <option value="10">10.0</option>
                </select>
            </div>
            <div class="control-row">
                <label>Number of Teeth:</label>
                <input type="range" id="num-teeth-involute" min="8" max="30" value="24">
                <span id="num-teeth-involute-value">24</span>
            </div>
            <div class="control-row">
                <label>Pressure Angle:</label>
                <select id="pressure-angle">
                    <option value="14.5">14.5° (Old standard)</option>
                    <option value="20" selected>20° (ISO standard)</option>
                    <option value="25">25° (ISO heavy duty)</option>
                </select>
            </div>
            <div class="control-row">
                <button id="reset-involute">Reset Animation</button>
                <button id="pause-involute">Pause</button>
            </div>
        </div>

        <div class="iso-note">
            <strong>ISO Standards Applied:</strong>
            <ul style="margin: 5px 0; padding-left: 20px;">
                <li>Module values per ISO 54:1996</li>
                <li>Addendum = 1.0 × module</li>
                <li>Dedendum = 1.25 × module</li>
                <li>Clearance = 0.25 × module</li>
                <li>Pressure angles per ISO 53:1998</li>
            </ul>
        </div>

        <div class="key-point">
            <p><strong>Involute Properties:</strong> The involute profile ensures that the velocity ratio remains constant throughout the meshing process, resulting in smooth power transmission. The contact between teeth follows a straight line called the line of action.</p>
        </div>
    </div>

    <div class="simulation-section">
        <h2>Simulation 2: Simple Gear Train</h2>
        <p>A simple gear train consists of two or more gears where each gear is on its own shaft. An idler gear can be added to change the direction of rotation without affecting the gear ratio.</p>
        
        <div id="simple-gear-simulation"></div>
        
        <div class="gear-controls">
            <div class="control-row">
                <label>Driver Teeth:</label>
                <input type="range" id="driver-teeth" min="8" max="40" value="10" step="2">
                <span id="driver-teeth-value">10</span>
            </div>
            <div class="control-row">
                <label>Driven Teeth:</label>
                <input type="range" id="driven-teeth" min="8" max="40" value="20" step="2">
                <span id="driven-teeth-value">20</span>
            </div>
            <div class="control-row">
                <label>Include Idler:</label>
                <input type="checkbox" id="include-idler">
                <label style="min-width: auto;">Idler Teeth:</label>
                <input type="range" id="idler-teeth" min="10" max="20" value="15" step="2" disabled>
                <span id="idler-teeth-value">15</span>
            </div>
            <div class="control-row">
                <label>Input Speed (RPM):</label>
                <input type="range" id="input-speed-simple" min="10" max="50" value="10">
                <span id="input-speed-simple-value">50</span>
            </div>
        </div>
        
        <div class="info-display">
            <p>Gear Ratio: <span id="gear-ratio-simple">2.00</span></p>
            <p>Output Speed: <span id="output-speed-simple">15.00 RPM</span></p>
            <p>Output Direction: <span id="output-direction-simple">Counter-clockwise</span></p>
        </div>
    </div>

    <div class="simulation-section">
        <h2>Simulation 3: Compound Gear Train</h2>
        <p>A compound gear train has two or more gears fixed to the same shaft. This allows for larger gear ratios in a more compact space.</p>
        
        <div id="compound-gear-simulation"></div>
        
        <div class="gear-controls">
            <div class="control-row">
                <label>Stage 1 Driver Teeth:</label>
                <input type="range" id="stage1-driver" min="10" max="30" value="10" step="2">
                <span id="stage1-driver-value">10</span>
            </div>
            <div class="control-row">
                <label>Stage 1 Driven Teeth:</label>
                <input type="range" id="stage1-driven" min="10" max="40" value="20" step="2">
                <span id="stage1-driven-value">20</span>
            </div>
            <div class="control-row">
                <label>Stage 2 Driver Teeth:</label>
                <input type="range" id="stage2-driver" min="10" max="40" value="10" step="2">
                <span id="stage2-driver-value">10</span>
            </div>
            <div class="control-row">
                <label>Stage 2 Driven Teeth:</label>
                <input type="range" id="stage2-driven" min="10" max="60" value="30" step="2">
                <span id="stage2-driven-value">30</span>
            </div>
            <div class="control-row">
                <label>Input Speed (RPM):</label>
                <input type="range" id="input-speed-compound" min="10" max="100" value="50">
                <span id="input-speed-compound-value">50</span>
            </div>
        </div>
        
        <div class="info-display">
            <p>Stage 1 Ratio: <span id="stage1-ratio"></span></p>
            <p>Stage 2 Ratio: <span id="stage2-ratio"></span></p>
            <p>Overall Ratio: <span id="overall-ratio"></span></p>
            <p>Intermediate Speed: <span id="intermediate-speed"></span></p>
            <p>Output Speed: <span id="output-speed-compound"></span></p>
        </div>

        <div class="equation-box">
            <p>For compound gear trains:</p>
            <p>\(GR_{total} = GR_1 \times GR_2 \times ... \times GR_n\)</p>
        </div>
    </div>

    <div class="simulation-section">
        <h2>Simulation 4: Epicyclic (Planetary) Gear Train</h2>
        <p>An epicyclic gear train consists of a sun gear, planet gears, a planet carrier, and a ring gear. By fixing different components, various gear ratios can be achieved.</p>
        
        <div id="epicyclic-gear-simulation"></div>
        
        <div class="gear-controls">
            <div class="control-row">
                <label>Fixed Component:</label>
                <select id="fixed-component">
                    <option value="ring">Ring Gear</option>
                    <option value="carrier">Carrier</option>
                    <option value="sun">Sun Gear</option>
                </select>
            </div>
            <div class="control-row">
                <label>Sun Teeth:</label>
                <input type="range" id="sun-teeth" min="12" max="30" value="20" step="2">
                <span id="sun-teeth-value">20</span>
            </div>
            <div class="control-row">
                <label>Planet Teeth:</label>
                <input type="range" id="planet-teeth" min="8" max="20" value="10" step="2">
                <span id="planet-teeth-value">10</span>
            </div>
            <div class="control-row">
                <label>Number of Planets:</label>
                <input type="range" id="num-planets" min="2" max="4" value="3" >
                <span id="num-planets-value">3</span>
            </div>
            <div class="control-row">
                <label>Input Speed (RPM):</label>
                <input type="range" id="input-speed-epicyclic" min="10" max="100" value="30">
                <span id="input-speed-epicyclic-value">30</span>
            </div>
        </div>
        
        <div class="info-display">
            <p>Ring Teeth: <span id="ring-teeth-value"></span></p>
            <p>Sun Speed: <span id="sun-speed"></span></p>
            <p>Carrier Speed: <span id="carrier-speed"></span></p>
            <p>Ring Speed: <span id="ring-speed"></span></p>
            <p>Gear Ratio: <span id="epicyclic-ratio"></span></p>
        </div>

        <div class="equation-box">
            <p>Willis Equation for Epicyclic Gears:</p>
            <p>\(\frac{\omega_s - \omega_c}{\omega_r - \omega_c} = -\frac{N_r}{N_s}\)</p>
            <p>Where: s = sun, r = ring, c = carrier</p>
        </div>
    </div>

    <div class="content-section">
        <h2>ISO Standards for Gears</h2>
        
        <h3>ISO Module Series</h3>
        <p>The module is the fundamental parameter in metric gear design. ISO 54:1996 specifies preferred modules:</p>
        
        <div class="equation-box">
            <p><strong>Series 1 (Preferred):</strong> 0.5, 0.8, 1, 1.25, 1.5, 2, 2.5, 3, 4, 5, 6, 8, 10, 12, 16, 20, 25, 32, 40, 50 mm</p>
            <p><strong>Series 2:</strong> 0.55, 0.7, 0.9, 1.125, 1.375, 1.75, 2.25, 2.75, 3.5, 4.5, 5.5, 7, 9, 11, 14, 18, 22, 28, 36, 45 mm</p>
        </div>
        
        <h3>Standard Pressure Angles</h3>
        <ul>
            <li><strong>20°</strong> - Standard pressure angle (ISO 53:1998)</li>
            <li><strong>25°</strong> - For heavy-duty applications</li>
            <li><strong>14.5°</strong> - Older standard, still used in some applications</li>
        </ul>
        
        <h3>Gear Geometry Formulas (ISO Standard)</h3>
        <div class="equation-box">
            <p>Pitch Diameter: \(d = m \times z\)</p>
            <p>Base Circle Diameter: \(d_b = d \times \cos(\alpha)\)</p>
            <p>Addendum: \(h_a = 1.0 \times m\)</p>
            <p>Dedendum: \(h_f = 1.25 \times m\)</p>
            <p>Clearance: \(c = 0.25 \times m\)</p>
            <p>Outside Diameter: \(d_a = d + 2h_a = m(z + 2)\)</p>
            <p>Root Diameter: \(d_f = d - 2h_f = m(z - 2.5)\)</p>
            <p>Where: \(m\) = module, \(z\) = number of teeth, \(\alpha\) = pressure angle</p>
        </div>
    </div>

    <div class="content-section">
        <h2>Practice Problems</h2>
        
        <div class="practice-problems">
            <h3>Problem 1: ISO Standard Gear Design</h3>
            <p>Design a gear pair with a ratio of 3:1 using ISO standard modules. The pinion should have 20 teeth with module 4 mm and 20° pressure angle. Calculate:</p>
            <ol>
                <li>The wheel specifications</li>
                <li>Centre distance</li>
                <li>Base circle diameters</li>
            </ol>
            
            <p class="toggle-section" onclick="toggleSolution('solution1')">Show Solution</p>
            <div id="solution1" class="hidden">
                <p>1. Wheel specifications:</p>
                <p>   - Number of teeth: 20 × 3 = 60 teeth</p>
                <p>   - Module: 4 mm (same as pinion)</p>
                <p>   - Pressure angle: 20° (same as pinion)</p>
                <p>2. Centre distance:</p>
                <p>   - Pinion pitch diameter: d₁ = 4 × 20 = 80 mm</p>
                <p>   - Wheel pitch diameter: d₂ = 4 × 60 = 240 mm</p>
                <p>   - Centre distance: a = (80 + 240)/2 = 160 mm</p>
                <p>3. Base circle diameters:</p>
                <p>   - Pinion: d_b1 = 80 × cos(20°) = 75.18 mm</p>
                <p>   - Wheel: d_b2 = 240 × cos(20°) = 225.53 mm</p>
            </div>
        </div>
        
        <div class="practice-problems">
            <h3>Problem 2: Module Selection</h3>
            <p>A gear needs a pitch diameter of approximately 100 mm with 25 teeth. Select the appropriate ISO standard module and calculate the exact pitch diameter.</p>
            
            <p class="toggle-section" onclick="toggleSolution('solution2')">Show Solution</p>
            <div id="solution2" class="hidden">
                <p>Required module: m = d/z = 100/25 = 4.0 mm</p>
                <p>This exactly matches ISO Series 1 module of 4.0 mm</p>
                <p>Exact pitch diameter: d = 4 × 25 = 100 mm</p>
                <p>Outside diameter: d_a = 4(25 + 2) = 108 mm</p>
                <p>Root diameter: d_f = 4(25 - 2.5) = 90 mm</p>
            </div>
        </div>
    </div>

    <footer>
        <script src="/assets/common/footer.js"></script>
    </footer>

    <script>
        // Function to toggle solution visibility
        function toggleSolution(id) {
            const solution = document.getElementById(id);
            if (solution.classList.contains('hidden')) {
                solution.classList.remove('hidden');
                const toggleElement = solution.previousElementSibling;
                toggleElement.textContent = "Hide Solution";
            } else {
                solution.classList.add('hidden');
                const toggleElement = solution.previousElementSibling;
                toggleElement.textContent = "Show Solution";
            }
        }
    </script>
</body>
</html>