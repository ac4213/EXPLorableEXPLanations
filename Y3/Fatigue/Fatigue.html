<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress-Based Fatigue Analysis - Interactive Lecture</title>
    
    <!-- p5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js"></script>
    
    <!-- Plotly library -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <!-- Load the fatigue analysis script -->
    <script src="fatigue-analysis.js"></script>
    
    <!-- Common styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/simulations.css">

    <style>
        /* Page-specific styles for fatigue module */
        .material-selector {
            margin: 15px 0;
            padding: 15px;
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 0 4px 4px 0;
        }

        .material-selector h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #b38600;
        }

        .material-selector select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 2px solid var(--primary-color);
            background-color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .material-selector select:hover {
            border-color: var(--secondary-color);
            background-color: #fffef5;
        }

        .material-selector select:focus {
            outline: none;
            border-color: var(--link-hover-color);
            box-shadow: 0 0 5px rgba(28, 1, 184, 0.2);
        }

        .preset-buttons {
            margin: 15px 0;
        }

        .calculated-params {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }

        .calculated-params h4 {
            margin-top: 0;
            color: #b38600;
        }

        .calculated-params p {
            margin: 5px 0;
        }

        .damage-block {
            background-color: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }

        .damage-results {
            background-color: #f9f9f9;
            border: 2px solid #ddd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .damage-status {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status-safe {
            color: #155724;
        }

        .status-warning {
            color: #856404;
        }

        .status-failure {
            color: #721c24;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .simulation-container {
                grid-template-columns: 1fr;
            }

            .plot-container {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .plot-container {
                height: 250px;
            }

            .preset-buttons button {
                display: block;
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Stress-Based Fatigue Analysis</h1>
        <p class="subtitle">Interactive Lecture & Simulation</p>
    </header>
    
    <div class="content-section">
        <h2 id="intro">Introduction to Fatigue Analysis</h2>
        <p>Fatigue is a failure mechanism that occurs in materials subjected to cyclic loading, even when the stresses are well below the material's ultimate tensile strength. This phenomenon accounts for a significant percentage of mechanical failures in engineering components.</p>
        
        <div class="key-point">
            <p><strong>Key aspects that differentiate fatigue from static failure:</strong></p>
            <ul>
                <li>Failure occurs after many loading cycles, not immediately</li>
                <li>Failure can occur at stress levels well below the yield strength</li>
                <li>Failure typically begins at a localised defect or stress concentration</li>
                <li>The process involves three stages: crack initiation, crack propagation, and final fracture</li>
            </ul>
        </div>
        
        <p>This interactive module explores the fundamental principles of stress-based fatigue analysis, providing visualisations and simulations to develop your intuition about this complex failure mode.</p>
    </div>
    
    <div class="content-section">
        <h2 id="basics">Fundamentals of Fatigue Loading</h2>
        
        <h3>Stress Cycle Parameters</h3>
        <p>In fatigue analysis, we characterise cyclic loading using several key parameters:</p>
        
        <div class="equation-box">
            <p>\[\sigma_{max} = \text{Maximum stress in cycle}\]</p>
            <p>\[\sigma_{min} = \text{Minimum stress in cycle}\]</p>
            <p>\[\sigma_a = \frac{\sigma_{max} - \sigma_{min}}{2} = \text{Stress amplitude}\]</p>
            <p>\[\sigma_m = \frac{\sigma_{max} + \sigma_{min}}{2} = \text{Mean stress}\]</p>
            <p>\[R = \frac{\sigma_{min}}{\sigma_{max}} = \text{Stress ratio}\]</p>
        </div>
        
        <div class="simulation-container">
            <div class="simulation-controls">
                <h3>Loading Parameters</h3>
                
                <div class="slider-container">
                    <label for="max-stress">Maximum Stress (MPa):</label>
                    <input type="range" id="max-stress" min="0" max="500" value="200" step="10">
                    <span id="max-stress-value" class="slider-value">200</span>
                </div>
                
                <div class="slider-container">
                    <label for="min-stress">Minimum Stress (MPa):</label>
                    <input type="range" id="min-stress" min="-300" max="400" value="-100" step="10">
                    <span id="min-stress-value" class="slider-value">-100</span>
                </div>
                
                <div class="slider-container">
                    <label for="frequency">Frequency (Hz):</label>
                    <input type="range" id="frequency" min="0.1" max="2" value="0.5" step="0.1">
                    <span id="frequency-value" class="slider-value">0.5</span>
                </div>
                
                <div class="calculated-params">
                    <h4>Calculated Parameters:</h4>
                    <p>Stress Amplitude (σₐ): <strong><span id="stress-amplitude">150</span> MPa</strong></p>
                    <p>Mean Stress (σₘ): <strong><span id="mean-stress-value">50</span> MPa</strong></p>
                    <p>Stress Ratio (R): <strong><span id="stress-ratio">-0.50</span></strong></p>
                </div>
                
                <div class="preset-buttons">
                    <h4>Common Loading Types:</h4>
                    <button id="fully-reversed">Fully Reversed (R = -1)</button>
                    <button id="zero-to-max">Zero-to-Max (R = 0)</button>
                    <button id="fluctuating-tension">Fluctuating Tension</button>
                    <button id="fluctuating-compression">Fluctuating Compression</button>
                </div>
            </div>
            
            <div class="simulation-display">
                <h3>Stress-Time History</h3>
                <div id="stress-time-plot" class="plot-container"></div>
            </div>
        </div>
    </div>
    
    <div class="content-section">
        <h2 id="sn-curves">S-N Curves and Fatigue Life Prediction</h2>
        
        <h3>The Wöhler Experiment</h3>
        <p>August Wöhler conducted the first systematic investigation of fatigue failure in the 1850s whilst studying railway axle failures. His experiments involved applying cyclic loads to test specimens until failure and plotting the results.</p>
        
        <h3>Basquin's Equation</h3>
        <div class="equation-box">
            <p>The relationship between stress amplitude and fatigue life:</p>
            <p>\[\sigma_a = \sigma'_f (2N_f)^b\]</p>
            <p>Where:</p>
            <ul>
                <li>\(\sigma_a\) = Stress amplitude</li>
                <li>\(\sigma'_f\) = Fatigue strength coefficient</li>
                <li>\(N_f\) = Number of cycles to failure</li>
                <li>\(b\) = Fatigue strength exponent (typically -0.05 to -0.12)</li>
            </ul>
            <p><strong>On log-log scale:</strong> Appears as a straight line with slope = b</p>
            <p><strong>On semi-log scale:</strong> Appears as a curved (power law) line</p>
        </div>
        
        <div class="simulation-container">
            <div class="simulation-controls">
                <h3>Material Parameters</h3>
                
                <div class="slider-container">
                    <label for="fatigue-strength">Fatigue Strength Coefficient (MPa):</label>
                    <input type="range" id="fatigue-strength" min="500" max="1500" value="1000" step="50">
                    <span id="fatigue-strength-value" class="slider-value">1000</span>
                </div>
                
                <div class="slider-container">
                    <label for="fatigue-exponent">Fatigue Strength Exponent:</label>
                    <input type="range" id="fatigue-exponent" min="-0.15" max="-0.05" value="-0.09" step="0.01">
                    <span id="fatigue-exponent-value" class="slider-value">-0.09</span>
                </div>
                
                <div class="material-selector">
                    <h4>Material Presets:</h4>
                    <select id="material-preset">
                        <option value="">-- Select a Material --</option>
                        <option value="steel-1045">Steel 1045 (Normalised)</option>
                        <option value="steel-4340">Steel 4340 (Tempered)</option>
                        <option value="steel-316">Stainless Steel 316</option>
                        <option value="aluminum-2024">Aluminium 2024-T3</option>
                        <option value="aluminum-6061">Aluminium 6061-T6</option>
                        <option value="aluminum-7075">Aluminium 7075-T6</option>
                        <option value="titanium-6al4v">Titanium Ti-6Al-4V</option>
                        <option value="titanium-pure">Titanium (Pure)</option>
                        <option value="cast-iron-grey">Grey Cast Iron</option>
                        <option value="cast-iron-ductile">Ductile Cast Iron</option>
                        <option value="magnesium-az31">Magnesium AZ31</option>
                        <option value="copper-c11000">Copper C11000</option>
                        <option value="brass-360">Brass 360</option>
                        <option value="nickel-200">Nickel 200</option>
                        <option value="inconel-718">Inconel 718</option>
                    </select>
                </div>
                
                <div style="margin: 15px 0; padding: 10px; background-color: #f0f0f0; border-radius: 5px;">
                    <label style="display: flex; align-items: center; cursor: pointer; font-weight: bold; color: #b38600;">
                        <input type="checkbox" id="log-log-scale" checked style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                        Use Log-Log Scale (straight line)
                    </label>
                    <p style="margin: 5px 0 0 28px; font-size: 0.9em; color: #666;">
                        <strong>Log-log:</strong> Both axes logarithmic - shows power law as straight line<br>
                        <strong>Semi-log:</strong> Only N-axis logarithmic - shows power law as curve
                    </p>
                </div>
                
                <div class="calculated-params">
                    <h4>Endurance Limits:</h4>
                    <p>At 10⁶ cycles: <strong><span id="endurance-limit">310</span> MPa</strong></p>
                    <p>At 10⁷ cycles: <strong><span id="long-endurance-limit">250</span> MPa</strong></p>
                </div>
            </div>
            
            <div class="simulation-display">
                <h3>S-N Curve (Wöhler Diagram)</h3>
                <div id="sn-curve-plot" class="plot-container"></div>
                <div class="key-point" style="margin-top: 15px;">
                    <p><strong>Understanding Scale Types:</strong></p>
                    <ul>
                        <li><strong>Log-log scale:</strong> Makes power laws appear linear, useful for determining material constants (slope = b)</li>
                        <li><strong>Semi-log scale:</strong> Better shows absolute stress values, commonly used in design handbooks</li>
                        <li>Toggle between scales to understand how the same data can be visualised differently</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="content-section">
        <h2 id="mean-stress">Effect of Mean Stress on Fatigue Life</h2>
        
        <p>In practical applications, many components experience cyclic loading with a non-zero mean stress. Tensile mean stress generally reduces fatigue life, whilst compressive mean stress tends to improve it.</p>
        
        <h3>Mean Stress Correction Models</h3>
        <div class="equation-box">
            <p><strong>Goodman:</strong> \(\frac{\sigma_a}{S_e} + \frac{\sigma_m}{S_{ut}} = 1\)</p>
            <p><strong>Gerber:</strong> \(\frac{\sigma_a}{S_e} + \left(\frac{\sigma_m}{S_{ut}}\right)^2 = 1\)</p>
            <p><strong>Soderberg:</strong> \(\frac{\sigma_a}{S_e} + \frac{\sigma_m}{S_y} = 1\)</p>
        </div>
        
        <div class="simulation-container">
            <div class="simulation-controls">
                <h3>Material Properties</h3>
                
                <div class="slider-container">
                    <label for="ultimate-strength">Ultimate Tensile Strength (MPa):</label>
                    <input type="range" id="ultimate-strength" min="300" max="1600" value="800" step="50">
                    <span id="ultimate-strength-value" class="slider-value">800</span>
                </div>
                
                <div class="slider-container">
                    <label for="yield-strength">Yield Strength (MPa):</label>
                    <input type="range" id="yield-strength" min="200" max="1400" value="600" step="50">
                    <span id="yield-strength-value" class="slider-value">600</span>
                </div>
                
                <div class="slider-container">
                    <label for="endurance-limit-input">Endurance Limit (MPa):</label>
                    <input type="range" id="endurance-limit-input" min="100" max="700" value="300" step="25">
                    <span id="endurance-limit-input-value" class="slider-value">300</span>
                </div>
                
                <h4>Assessment Point:</h4>
                <div class="slider-container">
                    <label for="point-mean-stress">Mean Stress (MPa):</label>
                    <input type="range" id="point-mean-stress" min="0" max="800" value="200" step="25">
                    <span id="point-mean-stress-value" class="slider-value">200</span>
                </div>
                
                <div class="slider-container">
                    <label for="point-stress-amplitude">Stress Amplitude (MPa):</label>
                    <input type="range" id="point-stress-amplitude" min="0" max="600" value="150" step="25">
                    <span id="point-stress-amplitude-value" class="slider-value">150</span>
                </div>
                
                <div class="calculated-params">
                    <h4>Safety Factors:</h4>
                    <p>Goodman: <strong><span id="goodman-sf">1.2</span></strong></p>
                    <p>Gerber: <strong><span id="gerber-sf">1.5</span></strong></p>
                    <p>Soderberg: <strong><span id="soderberg-sf">0.9</span></strong></p>
                </div>
            </div>
            
            <div class="simulation-display">
                <h3>Haigh Diagram</h3>
                <div id="haigh-diagram" class="plot-container"></div>
            </div>
        </div>
    </div>
    
    <div class="content-section">
        <h2 id="damage">Cumulative Damage Theory</h2>
        
        <p>In real applications, components often experience variable amplitude loading. The Palmgren-Miner rule provides a way to assess cumulative damage.</p>
        
        <h3>Palmgren-Miner Linear Damage Rule</h3>
        <div class="equation-box">
            <p>\[D = \sum_{i=1}^{k} \frac{n_i}{N_i}\]</p>
            <p>Where:</p>
            <ul>
                <li>\(D\) = Cumulative damage (failure when D ≥ 1)</li>
                <li>\(n_i\) = Cycles applied at stress level i</li>
                <li>\(N_i\) = Cycles to failure at stress level i</li>
            </ul>
        </div>
        
        <div class="simulation-container">
            <div class="simulation-controls">
                <h3>Variable Amplitude Loading</h3>
                
                <div class="damage-block">
                    <h4>Stress Block 1:</h4>
                    <div class="slider-container">
                        <label for="stress-amp-1">Stress Amplitude (MPa):</label>
                        <input type="range" id="stress-amp-1" min="50" max="500" value="300" step="25">
                        <span id="stress-amp-1-value" class="slider-value">300</span>
                    </div>
                    <div class="slider-container">
                        <label for="cycles-1">Cycles Applied:</label>
                        <input type="range" id="cycles-1" min="100" max="100000" value="10000" step="1000">
                        <span id="cycles-1-value" class="slider-value">10000</span>
                    </div>
                </div>
                
                <div class="damage-block">
                    <h4>Stress Block 2:</h4>
                    <div class="slider-container">
                        <label for="stress-amp-2">Stress Amplitude (MPa):</label>
                        <input type="range" id="stress-amp-2" min="50" max="500" value="200" step="25">
                        <span id="stress-amp-2-value" class="slider-value">200</span>
                    </div>
                    <div class="slider-container">
                        <label for="cycles-2">Cycles Applied:</label>
                        <input type="range" id="cycles-2" min="100" max="500000" value="50000" step="5000">
                        <span id="cycles-2-value" class="slider-value">50000</span>
                    </div>
                </div>
                
                <div class="damage-block">
                    <h4>Stress Block 3:</h4>
                    <div class="slider-container">
                        <label for="stress-amp-3">Stress Amplitude (MPa):</label>
                        <input type="range" id="stress-amp-3" min="50" max="500" value="150" step="25">
                        <span id="stress-amp-3-value" class="slider-value">150</span>
                    </div>
                    <div class="slider-container">
                        <label for="cycles-3">Cycles Applied:</label>
                        <input type="range" id="cycles-3" min="100" max="1000000" value="100000" step="10000">
                        <span id="cycles-3-value" class="slider-value">100000</span>
                    </div>
                </div>
                
                <div class="damage-results">
                    <h4>Cumulative Damage Results:</h4>
                    <p>Total Damage (D): <strong><span id="total-damage">0.73</span></strong></p>
                    <p>Remaining Life: <strong><span id="remaining-life">27%</span></strong></p>
                    <p>Status: <strong><span id="damage-status" class="damage-status status-safe">Safe</span></strong></p>
                </div>
            </div>
            
            <div class="simulation-display">
                <h3>Palmgren-Miner Damage Accumulation</h3>
                <div id="damage-plot" class="plot-container"></div>
            </div>
        </div>
        
        <div class="key-point">
            <p><strong>Limitations of the Palmgren-Miner Rule:</strong></p>
            <ul>
                <li>Does not account for sequence effects</li>
                <li>Assumes linear damage accumulation</li>
                <li>Observed failure often occurs at D values between 0.7 and 1.5</li>
                <li>Conservative design often uses a target D value of 0.7 or lower</li>
            </ul>
        </div>
    </div>
    
    <div class="content-section">
        <h2 id="problems">Practice Problems</h2>
        
        <div class="practice-problems">
            <h3>Problem 1: Fatigue Life Prediction</h3>
            <p>A steel component (σ'f = 1000 MPa, b = -0.09) experiences fully reversed loading with a stress amplitude of 300 MPa. Calculate the expected fatigue life.</p>
            
            <p class="toggle-section" onclick="toggleSolution('solution1')">Show Solution</p>
            <div id="solution1" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>Using Basquin's equation: σₐ = σ'f(2Nf)^b</p>
                <p>300 = 1000 × (2Nf)^(-0.09)</p>
                <p>0.3 = (2Nf)^(-0.09)</p>
                <p>(2Nf) = 0.3^(-1/0.09) = 1.38 × 10^5</p>
                <p>Nf = 6.90 × 10^4 cycles</p>
            </div>
        </div>
        
        <div class="practice-problems">
            <h3>Problem 2: Mean Stress Correction</h3>
            <p>A component experiences σₐ = 200 MPa and σₘ = 150 MPa. If Se = 400 MPa and Sut = 800 MPa, calculate the safety factor using the Goodman criterion.</p>
            
            <p class="toggle-section" onclick="toggleSolution('solution2')">Show Solution</p>
            <div id="solution2" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>Goodman equation: σₐ/Se + σₘ/Sut = 1/SF</p>
                <p>200/400 + 150/800 = 1/SF</p>
                <p>0.5 + 0.1875 = 1/SF</p>
                <p>0.6875 = 1/SF</p>
                <p>SF = 1.45</p>
            </div>
        </div>
        
        <div class="practice-problems">
            <h3>Problem 3: Cumulative Damage</h3>
            <p>A component experiences three stress blocks: Block 1: 400 MPa for 1000 cycles (Nf = 10,000), Block 2: 300 MPa for 20,000 cycles (Nf = 100,000), Block 3: 200 MPa for 500,000 cycles (Nf = 10^6). Calculate the cumulative damage.</p>
            
            <p class="toggle-section" onclick="toggleSolution('solution3')">Show Solution</p>
            <div id="solution3" class="hidden">
                <p><strong>Solution:</strong></p>
                <p>Using Palmgren-Miner rule: D = Σ(ni/Ni)</p>
                <p>D₁ = 1000/10,000 = 0.1</p>
                <p>D₂ = 20,000/100,000 = 0.2</p>
                <p>D₃ = 500,000/1,000,000 = 0.5</p>
                <p>Total D = 0.1 + 0.2 + 0.5 = 0.8</p>
                <p>Component is safe (D < 1) with 20% remaining life</p>
            </div>
        </div>
    </div>
    
    <div class="content-section">
        <h2 id="quiz">Interactive Quiz</h2>
        
        <div class="quiz-container">
            <div class="quiz-question">
                <h3>Question 1: Stress amplitude for a cycle between 50 MPa and 250 MPa is:</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q1" value="a"> a) 100 MPa</label>
                    <label><input type="radio" name="q1" value="b"> b) 150 MPa</label>
                    <label><input type="radio" name="q1" value="c"> c) 200 MPa</label>
                    <label><input type="radio" name="q1" value="d"> d) 250 MPa</label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 2: For fully reversed loading, the stress ratio R equals:</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q2" value="a"> a) 0</label>
                    <label><input type="radio" name="q2" value="b"> b) -1</label>
                    <label><input type="radio" name="q2" value="c"> c) 1</label>
                    <label><input type="radio" name="q2" value="d"> d) ∞</label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 3: Which material typically shows a distinct endurance limit?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q3" value="a"> a) Aluminium</label>
                    <label><input type="radio" name="q3" value="b"> b) Copper</label>
                    <label><input type="radio" name="q3" value="c"> c) Steel</label>
                    <label><input type="radio" name="q3" value="d"> d) Titanium</label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 4: According to Palmgren-Miner, failure occurs when D equals:</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q4" value="a"> a) 0</label>
                    <label><input type="radio" name="q4" value="b"> b) 0.5</label>
                    <label><input type="radio" name="q4" value="c"> c) 1.0</label>
                    <label><input type="radio" name="q4" value="d"> d) 2.0</label>
                </div>
            </div>
            
            <div class="quiz-question">
                <h3>Question 5: Which mean stress correction is most conservative?</h3>
                <div class="quiz-options">
                    <label><input type="radio" name="q5" value="a"> a) Goodman</label>
                    <label><input type="radio" name="q5" value="b"> b) Gerber</label>
                    <label><input type="radio" name="q5" value="c"> c) Soderberg</label>
                    <label><input type="radio" name="q5" value="d"> d) Modified Goodman</label>
                </div>
            </div>
            
            <button id="submit-quiz">Submit Quiz</button>
            <div id="quiz-results" class="hidden"></div>
        </div>
    </div>
    
    <footer>
        <script src="/assets/common/footer.js"></script>
    </footer>
    

</body>
</html>