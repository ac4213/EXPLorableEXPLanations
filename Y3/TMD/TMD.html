<!DOCTYPE html>
<html>
<head>
    <title>Tuned Mass Damper - Interactive Lecture</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/simulations.css">
    <link rel="stylesheet" href="/assets/css/uicontrols.css">

    <style>
        /* Page-specific styles for TMD layout */
        .app-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .controls {
            background: #f5f5f5;
            padding: 10px;
            border: 1px solid #ddd;
        }
        .constants {
            font-size: 12px;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        .animation-container {
            background: #f5f5f5;
            padding: 20px;
            border: 1px solid #ddd;
            height: 300px;
        }
        .plots {
            display: grid;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            height: fit-content;
        }
        .plot-container {
            border: 1px solid #ddd;
            padding: 10px;
            background: #f5f5f5;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
        }
        canvas {
            display: block;
        }
        .plot-title {
            font-size: 12px;
            margin: 0 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <h1>Tuned Mass Damper</h1>
        <p class="subtitle">Interactive Lecture & Simulation</p>
    </header>

    <div class="content-section">
        <h2>Understanding Tuned Mass Dampers</h2>
        <p>A Tuned Mass Damper (TMD) is a passive vibration control device consisting of a mass, spring, and damper attached to a primary structure. The TMD is "tuned" so that its natural frequency matches the dominant frequency of the primary structure, allowing it to absorb vibrational energy and reduce the motion of the main system.</p>

        <div class="key-point">
            <p><strong>Core Insight:</strong> When properly tuned, a TMD can dramatically reduce the vibration amplitude of the primary structure by transferring energy to the secondary mass, where it is dissipated through damping.</p>
        </div>

        <h3>How TMDs Work</h3>
        <p>The TMD operates on the principle of dynamic vibration absorption. When the primary structure vibrates, the TMD oscillates out of phase with the structure, creating an inertial force that opposes the motion of the main system.</p>

        <h3>TMD Equations of Motion</h3>
        <p>For a 2-DOF system with a primary mass \(m_1\) and TMD mass \(m_2\):</p>
        <div class="equation-box">
            <p>\[m_1\ddot{x}_1 + c_1\dot{x}_1 + k_1x_1 + k_2(x_1-x_2) + c_2(\dot{x}_1-\dot{x}_2) = F_0\cos(\omega t)\]</p>
            <p>\[m_2\ddot{x}_2 + k_2(x_2-x_1) + c_2(\dot{x}_2-\dot{x}_1) = 0\]</p>
            <p>where:</p>
            <ul>
                <li>\(m_1, k_1, c_1\) = primary system parameters</li>
                <li>\(m_2, k_2, c_2\) = TMD parameters</li>
                <li>\(F_0\cos(\omega t)\) = harmonic forcing</li>
            </ul>
        </div>

        <h3>TMD Design Parameters</h3>
        <div class="equation-box">
            <p><strong>Mass Ratio:</strong> \(\mu = \frac{m_2}{m_1}\) (typically 0.01 to 0.05)</p>
            <p><strong>Frequency Ratio:</strong> \(f = \frac{\omega_2}{\omega_1}\) where \(\omega_1 = \sqrt{\frac{k_1}{m_1}}\) and \(\omega_2 = \sqrt{\frac{k_2}{m_2}}\)</p>
            <p><strong>Optimal tuning:</strong> \(f_{opt} = \frac{1}{1 + \mu}\)</p>
            <p><strong>Optimal damping ratio:</strong> \(\zeta_{opt} = \sqrt{\frac{3\mu}{8(1+\mu)^3}}\)</p>
        </div>

        <h3>Frequency Response</h3>
        <p>The amplitude ratio of the primary mass is given by:</p>
        <div class="equation-box">
            <p>\[\frac{X_1}{X_{st}} = \frac{\sqrt{[1-(\omega/\omega_2)^2]^2 + [2\zeta_2(\omega/\omega_2)]^2}}{\left|[1+k_{12}-(\omega/\omega_1)^2][1-(\omega/\omega_2)^2] - k_{12}\right|}\]</p>
            <p>where \(X_{st} = F_0/k_1\) is the static deflection and \(k_{12} = k_2/k_1 = \mu\) for optimal tuning.</p>
        </div>

        <div class="key-point">
            <p><strong>Two Fixed Points:</strong> A properly designed TMD creates two fixed points in the frequency response curve, independent of damping. This ensures robust performance across a range of damping values.</p>
        </div>

        <h3>Real-World Applications</h3>
        <ul>
            <li><strong>Tall Buildings:</strong> Taipei 101 (660-ton TMD), Shanghai Tower, Tokyo Skytree</li>
            <li><strong>Bridges:</strong> London Millennium Bridge, Brooklyn Bridge</li>
            <li><strong>Industrial Equipment:</strong> Large turbines, compressors</li>
            <li><strong>Wind Turbines:</strong> Nacelle vibration reduction</li>
        </ul>
    </div>

    <div class="simulation-container">
        <h2>Interactive TMD Simulation</h2>
        <p>Compare the unprotected and TMD-protected systems. Adjust the TMD mass ratio, damping, and forcing frequency to observe their effects on vibration amplitude.</p>

    <div class="app-container">
        <div class="left-panel">
            <div class="controls">
                <h3>TUNED MASS DAMPER</h3>
                
                <div class="constants">
                    <div>main mass = 500 kg</div>
                    <div>main stiffness = 100000 N/m</div>
                    <div>main pulsation = 14.14 rad/s</div>
                </div>

                <div class="slider-container">
                    <div class="slider-label">
                        <span>TMD mass ratio μ = m₂/m₁</span>
                        <span id="tmdMassValue">0.05</span>
                    </div>
                    <input type="range" id="tmdMassSlider" min="0" max="0.2" value="0.05" step="0.001">
                </div>

                <div class="slider-container">
                    <div class="slider-label">
                        <span>Damping ratio</span>
                        <span id="dampingValue">0.05</span>
                    </div>
                    <input type="range" id="dampingSlider" min="0" max="0.1" value="0.05" step="0.01">
                </div>

                <div class="slider-container">
                    <div class="slider-label">
                        <span>Forcing pulsation [rad/s]</span>
                        <span id="forcingValue">14.14</span>
                    </div>
                    <input type="range" id="forcingSlider" min="0" max="30" value="14.14" step="0.1">
                </div>

                <button id="animateButton">Animate</button>
            </div>
            <div id="animationContainer" class="animation-container"></div>
        </div>

        <div class="plots">
            <div id="mainMassFRF" class="plot-container">
                <div class="plot-title">main mass FRF</div>
            </div>
            <div id="tmdMassFRF" class="plot-container">
                <div class="plot-title">TMD mass FRF</div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        const globals = {
            time: 0,
            animating: false,
            mainMass: 500,
            mainStiffness: 100000,
            mainPulsation: Math.sqrt(100000/500),
            massRatio: 0.05,
            dampingRatio: 0.05,
            forcingPulsation: 14.14
        };

        function calculateMainMassFRF(w, protected) {
            if(!protected) {
                // Unprotected SDOF system
                const freq_ratio = w/globals.mainPulsation;
                return 1/Math.sqrt(Math.pow(1 - Math.pow(freq_ratio, 2), 2) + 
                    Math.pow(2*globals.dampingRatio*freq_ratio, 2));
            } else {
                // Protected system using the exact equation from the image
                const freq_ratio = w/globals.mainPulsation;
                const k2_k1 = globals.massRatio;  // Since we keep ω₂ₙ = ω₁ₙ, k₂/k₁ = μ
                
                const numerator = Math.abs(1 - Math.pow(freq_ratio, 2));
                const denominator = Math.abs(
                    (1 + k2_k1 - Math.pow(freq_ratio, 2)) * 
                    (1 - Math.pow(freq_ratio, 2)) - 
                    k2_k1
                );
                
                return numerator/denominator;
            }
        }

        function calculateTMDMassFRF(w) {
            const freq_ratio = w/globals.mainPulsation;
            const k2_k1 = globals.massRatio;
            
            const denominator = Math.abs(
                (1 + k2_k1 - Math.pow(freq_ratio, 2)) * 
                (1 - Math.pow(freq_ratio, 2)) - 
                k2_k1
            );
            
            return 1/denominator;
        }

        function mainMassPlot(p) {
            p.setup = function() {
                p.createCanvas(800, 400);
            }

            p.draw = function() {
                p.background(255);
                drawLogGrid(p);
                drawMainMassFRF(p);
                drawPlotLabels(p);
                // Draw forcing frequency indicator
                const xPos = p.map(globals.forcingPulsation, 0, 30, 50, p.width - 20);
                p.stroke(100, 100, 255, 150);
                p.strokeWeight(1);
                p.drawingContext.setLineDash([5, 5]);
                p.line(xPos, 20, xPos, p.height - 20);
                p.drawingContext.setLineDash([]);
            }
        }

        function tmdMassPlot(p) {
            p.setup = function() {
                p.createCanvas(800, 400);
            }

            p.draw = function() {
                p.background(255);
                drawLogGrid(p);
                drawTMDMassFRF(p);
                drawPlotLabels(p);
                // Draw forcing frequency indicator
                const xPos = p.map(globals.forcingPulsation, 0, 30, 50, p.width - 20);
                p.stroke(100, 100, 255, 150);
                p.strokeWeight(1);
                p.drawingContext.setLineDash([5, 5]);
                p.line(xPos, 20, xPos, p.height - 20);
                p.drawingContext.setLineDash([]);
            }
        }

        function drawMainMassFRF(p) {
            // Draw unprotected system (black)
            p.stroke(0);
            p.strokeWeight(2);  // Thicker line
            p.noFill();
            p.beginShape();
            for(let w = 0.1; w <= 30; w += 0.1) {
                const x = p.map(w, 0, 30, 50, p.width - 20);
                const mag = calculateMainMassFRF(w, false);
                const y = p.map(p.log(mag)/p.log(10), -2, 2, p.height - 20, 20);  // Starting from 10^-2
                if(y > 0 && y < p.height) p.vertex(x, y);
            }
            p.endShape();

            // Draw protected system (red)
            p.stroke(255, 0, 0);
            p.strokeWeight(2);  // Thicker line
            p.beginShape();
            for(let w = 0.1; w <= 30; w += 0.1) {
                const x = p.map(w, 0, 30, 50, p.width - 20);
                const mag = calculateMainMassFRF(w, true);
                const y = p.map(p.log(mag)/p.log(10), -2, 2, p.height - 20, 20);  // Starting from 10^-2
                if(y > 0 && y < p.height) p.vertex(x, y);
            }
            p.endShape();
        }

        function drawTMDMassFRF(p) {
            p.stroke(255, 0, 0);
            p.strokeWeight(2);  // Thicker line
            p.noFill();
            p.beginShape();
            for(let w = 0.1; w <= 30; w += 0.1) {
                const x = p.map(w, 0, 30, 50, p.width - 20);
                const mag = calculateTMDMassFRF(w);
                const y = p.map(p.log(mag)/p.log(10), -2, 2, p.height - 20, 20);  // Starting from 10^-2
                if(y > 0 && y < p.height) p.vertex(x, y);
            }
            p.endShape();
        }

        function drawLogGrid(p) {
            p.stroke(200);
            p.strokeWeight(0.5);

            // Draw vertical grid lines (frequency axis)
            for(let x = 0; x <= 30; x += 2) {
                const xPos = p.map(x, 0, 30, 50, p.width - 20);
                p.line(xPos, 20, xPos, p.height - 20);
                
                // Add frequency labels
                if(x % 4 === 0) {
                    p.noStroke();
                    p.fill(0);
                    p.textSize(8);
                    p.textAlign(p.CENTER);
                    p.text(x, xPos, p.height - 5);
                }
            }

            // Draw horizontal grid lines (logarithmic amplitude axis)
            for(let i = -2; i <= 2; i++) {  // Starting from 10^-2
                const yPos = p.map(i, -2, 2, p.height - 20, 20);
                p.stroke(200);
                p.line(50, yPos, p.width - 20, yPos);
                
                // Add amplitude labels
                p.noStroke();
                p.fill(0);
                p.textSize(8);
                p.textAlign(p.RIGHT);
                p.text(`10^${i}`, 45, yPos + 3);
            }
        }

        function drawPlotLabels(p) {
            p.noStroke();
            p.fill(0);
            p.textSize(10);
            p.textAlign(p.CENTER);
            p.text('ω [rad/s]', p.width/2, p.height - 5);
            p.push();
            p.translate(15, p.height/2);
            p.rotate(-p.PI/2);
            p.text('Amplitude [m/N]', 0, 0);
            p.pop();
        }

        function animation(p) {
            let baseY;
            
            p.setup = function() {
                p.createCanvas(260, 260);
                baseY = p.height * 0.8;
            }

            p.draw = function() {
                p.background(255);
                
                if (globals.animating) {
                    globals.time += 0.05;
                }

                // Draw base line
                p.stroke(0);
                p.line(0, baseY, p.width, baseY);

                // Draw systems side by side
                drawSystem(p, p.width/3, baseY, false);
                drawSystem(p, 2*p.width/3, baseY, true);
            }
        }

        function calculateTMDPhase(w) {
            // Calculate the phase relationship between TMD and main mass
            const freq_ratio = w/globals.mainPulsation;
            const k2_k1 = globals.massRatio;
            
            // Phase is determined by sign of denominator - numerator
            // When freq_ratio < 1, they're in phase (phase = 0)
            // When freq_ratio > 1, they're out of phase (phase = π)
            // Around freq_ratio = 1, phase transitions
            
            if (freq_ratio < 1) {
                return 0;  // In phase for first resonance
            } else {
                return Math.PI;  // Out of phase for second resonance
            }
        }

        function drawSystem(p, x, baseY, protected) {
            // Get the current FRF values at forcing frequency
            const unprotectedFRF = calculateMainMassFRF(globals.forcingPulsation, false);
            const protectedMainFRF = calculateMainMassFRF(globals.forcingPulsation, true);
            const tmdFRF = calculateTMDMassFRF(globals.forcingPulsation);
            
            // Animation speed factor (lower = slower)
            const timeScale = 0.1;
            
            // Simple amplitude scaling for visualization
            const scaleFactor = 15;
            
            if (!protected) {
                // Unprotected system (black)
                const amplitude = unprotectedFRF * scaleFactor;
                const massDisp = amplitude * p.sin(globals.forcingPulsation * globals.time * timeScale);
                
                drawSpring(p, x, baseY, x, baseY - 100 + massDisp, p.color(0));
                p.fill(0);
                p.stroke(0);
                p.rect(x - 20, baseY - 120 + massDisp, 40, 40);
            } else {
                // Protected system (red)
                const mainAmplitude = protectedMainFRF * scaleFactor;
                const mainDisp = mainAmplitude * p.sin(globals.forcingPulsation * globals.time * timeScale);
                
                // Calculate phase relationship based on frequency
                const tmdPhase = calculateTMDPhase(globals.forcingPulsation);
                
                const tmdAmplitude = tmdFRF * scaleFactor;
                const tmdDisp = mainDisp + tmdAmplitude * p.sin(globals.forcingPulsation * globals.time * timeScale + tmdPhase);
                
                // Draw main mass and its spring
                drawSpring(p, x, baseY, x, baseY - 100 + mainDisp, p.color(255, 0, 0));
                p.fill(255, 0, 0);
                p.stroke(255, 0, 0);
                p.rect(x - 20, baseY - 120 + mainDisp, 40, 40);
                
                // Draw TMD and its spring
                const tmdSize = 15 + 15 * globals.massRatio;
                drawSpring(p, x, baseY - 120 + mainDisp, x, baseY - 160 + tmdDisp, p.color(255, 0, 0));
                p.rect(x - tmdSize/2, baseY - 175 + tmdDisp, tmdSize, tmdSize);
            }
        }

        function drawSpring(p, x1, y1, x2, y2, color) {
            p.stroke(color);
            p.noFill();
            p.beginShape();
            const segments = 12;
            const amplitude = 8;
            for (let i = 0; i <= segments; i++) {
                const y = p.map(i, 0, segments, y1, y2);
                const x = x1 + p.sin(i * p.PI) * amplitude;
                p.vertex(x, y);
            }
            p.endShape();
        }

        // Event Listeners
        document.getElementById('tmdMassSlider').addEventListener('input', function(e) {
            globals.massRatio = parseFloat(e.target.value);
            document.getElementById('tmdMassValue').textContent = globals.massRatio.toFixed(3);
        });

        document.getElementById('dampingSlider').addEventListener('input', function(e) {
            globals.dampingRatio = parseFloat(e.target.value);
            document.getElementById('dampingValue').textContent = globals.dampingRatio.toFixed(3);
        });

        document.getElementById('forcingSlider').addEventListener('input', function(e) {
            globals.forcingPulsation = parseFloat(e.target.value);
            document.getElementById('forcingValue').textContent = globals.forcingPulsation.toFixed(2);
        });

        document.getElementById('animateButton').addEventListener('click', function() {
            globals.animating = !globals.animating;
            this.textContent = globals.animating ? 'Stop' : 'Animate';
            globals.time = 0;
        });

        // Create p5.js instances
        new p5(mainMassPlot, 'mainMassFRF');
        new p5(tmdMassPlot, 'tmdMassFRF');
        new p5(animation, 'animationContainer');
    </script>

</div> <!-- End app-container -->
</div> <!-- End simulation-container -->

<div class="content-section">
    <h2>Applications and Examples</h2>
    <p>Tuned Mass Dampers are passive vibration control devices with wide-ranging applications across civil, mechanical, and aerospace engineering:</p>
    <ul>
        <li><strong>Tall Buildings:</strong> Iconic structures like Taipei 101 (660-ton TMD), Shanghai Tower, Tokyo Skytree, and Burj Khalifa use TMDs to reduce wind-induced sway and improve occupant comfort during high winds or seismic events.</li>
        <li><strong>Bridges:</strong> The London Millennium Bridge was retrofitted with TMDs to eliminate lateral vibrations caused by pedestrian footfall synchronization, while many long-span suspension bridges use TMDs to control wind-induced oscillations.</li>
        <li><strong>Industrial Rotating Machinery:</strong> Large turbines, compressors, and centrifuges incorporate TMDs to suppress resonant vibrations at critical operating speeds, extending equipment life and reducing noise.</li>
        <li><strong>Wind Turbines:</strong> TMDs installed in nacelles and tower structures dampen vibrations from blade rotation and wind gusts, preventing fatigue damage and improving power generation efficiency.</li>
        <li><strong>Aerospace Structures:</strong> Helicopter rotor systems and aircraft control surfaces use TMDs to reduce flutter and vibration, enhancing pilot control and passenger comfort.</li>
        <li><strong>Automotive Engineering:</strong> Engine mounts and exhaust systems employ TMD principles to isolate vibrations and reduce cabin noise, particularly at specific RPM ranges.</li>
    </ul>
</div>

<div class="content-section">
    <h2>Practice Problems</h2>

    <div class="practice-problems">
        <h3>Problem 1: TMD Design</h3>
        <p>A building with mass m₁ = 500 kg and natural frequency ω₁ = 10 rad/s needs a TMD with mass ratio μ = 0.05. Calculate:</p>
        <ol type="a">
            <li>The TMD mass m₂</li>
            <li>The optimal TMD frequency ω₂</li>
            <li>The optimal damping ratio ζ₂</li>
        </ol>

        <p class="toggle-section" onclick="toggleSolution('solution1')">Show Solution</p>
        <div id="solution1" class="hidden">
            <p><strong>Solution:</strong></p>
            <p>a) TMD mass:</p>
            <p>\(m_2 = \mu \cdot m_1 = 0.05 \times 500 = 25\) kg</p>

            <p>b) Optimal TMD frequency (tuned to match primary frequency):</p>
            <p>\(f_{opt} = \frac{1}{1 + \mu} = \frac{1}{1 + 0.05} = 0.952\)</p>
            <p>\(\omega_2 = f_{opt} \cdot \omega_1 = 0.952 \times 10 = 9.52\) rad/s</p>

            <p>c) Optimal damping ratio:</p>
            <p>\(\zeta_{opt} = \sqrt{\frac{3\mu}{8(1+\mu)^3}} = \sqrt{\frac{3(0.05)}{8(1.05)^3}} = \sqrt{\frac{0.15}{9.26}} = 0.127\)</p>

            <p>Required stiffness: \(k_2 = m_2\omega_2^2 = 25 \times 9.52^2 = 2266\) N/m</p>
            <p>Required damping: \(c_2 = 2\zeta_2m_2\omega_2 = 2 \times 0.127 \times 25 \times 9.52 = 60.5\) Ns/m</p>
        </div>
    </div>

    <div class="practice-problems">
        <h3>Problem 2: TMD Effectiveness</h3>
        <p>A structure without TMD has maximum amplitude X₁ = 50 mm at resonance. With a properly tuned TMD (μ = 0.05), what is the theoretical amplitude reduction factor?</p>

        <p class="toggle-section" onclick="toggleSolution('solution2')">Show Solution</p>
        <div id="solution2" class="hidden">
            <p><strong>Solution:</strong></p>
            <p>For an optimally tuned TMD, the amplitude reduction factor at the primary resonance is approximately:</p>
            <p>\[\text{Reduction Factor} = \frac{1}{2\mu}\]</p>

            <p>For μ = 0.05:</p>
            <p>\[\text{Reduction Factor} = \frac{1}{2 \times 0.05} = 10\]</p>

            <p>New maximum amplitude:</p>
            <p>\(X_{1,TMD} = \frac{X_1}{10} = \frac{50}{10} = 5\) mm</p>

            <p>This represents a 90% reduction in vibration amplitude!</p>

            <p><strong>Note:</strong> This is the theoretical maximum effectiveness. Real systems may achieve 70-85% reduction due to practical constraints.</p>
        </div>
    </div>

    <div class="practice-problems">
        <h3>Problem 3: Tuning Frequency Optimization</h3>
        <p>A building has a mass of 5,000,000 kg and a natural frequency of 0.5 Hz. A TMD with mass 50,000 kg is to be installed. Calculate:</p>
        <ol type="a">
            <li>The mass ratio μ</li>
            <li>The optimal tuning frequency of the TMD using Den Hartog's formula: \(f_{opt} = \frac{f_n}{1 + \mu}\)</li>
            <li>The required stiffness for the TMD</li>
            <li>If the TMD's stroke is limited to 1 m, estimate the damping coefficient needed</li>
        </ol>

        <p class="toggle-section" onclick="toggleSolution('solution3')">Show Solution</p>
        <div id="solution3" class="hidden">
            <h4>Solution:</h4>
            <p><strong>(a) Mass ratio:</strong></p>
            <p>\[\mu = \frac{m_{TMD}}{m_{structure}} = \frac{50,000}{5,000,000} = 0.01 = 1\%\]</p>

            <p><strong>(b) Optimal tuning frequency:</strong></p>
            <p>\[f_{opt} = \frac{f_n}{1 + \mu} = \frac{0.5}{1 + 0.01} = \frac{0.5}{1.01} = 0.495 \text{ Hz}\]</p>
            <p>\[\omega_{opt} = 2\pi f_{opt} = 2\pi \times 0.495 = 3.11 \text{ rad/s}\]</p>

            <p><strong>(c) Required stiffness:</strong></p>
            <p>\[k_{TMD} = m_{TMD} \omega_{opt}^2 = 50,000 \times (3.11)^2 = 50,000 \times 9.67 = 483,500 \text{ N/m} = 483.5 \text{ kN/m}\]</p>

            <p><strong>(d) Damping coefficient estimate:</strong></p>
            <p>For optimal performance, the damping ratio \(\zeta_{opt}\) is approximately:</p>
            <p>\[\zeta_{opt} = \sqrt{\frac{3\mu}{8(1+\mu)^3}} = \sqrt{\frac{3 \times 0.01}{8(1.01)^3}} = \sqrt{\frac{0.03}{8.24}} = \sqrt{0.00364} = 0.060\]</p>
            <p>\[c_{cr} = 2\sqrt{k_{TMD} \times m_{TMD}} = 2\sqrt{483,500 \times 50,000} = 2 \times 4,917 = 9,834 \text{ Ns/m}\]</p>
            <p>\[c_{TMD} = \zeta_{opt} \times c_{cr} = 0.060 \times 9,834 = 590 \text{ Ns/m}\]</p>

            <p><strong>Verification:</strong> With a 1 m stroke limit and building frequency of 0.5 Hz, the maximum velocity is approximately \(v_{max} = 2\pi f \times A = 2\pi \times 0.5 \times 1 = 3.14\) m/s. The damping force would be \(F_d = c \times v = 590 \times 3.14 = 1,853\) N, which is reasonable for this system.</p>
        </div>
    </div>
</div>

<div class="content-section">
    <h2>Summary of Key Equations</h2>
    <div class="equation-box">
        <table>
            <tr>
                <th>Concept</th>
                <th>Equation</th>
                <th>Description</th>
            </tr>
            <tr>
                <td>Mass Ratio</td>
                <td>\(\mu = \frac{m_{TMD}}{m_{structure}}\)</td>
                <td>Ratio of TMD mass to primary structure mass (typically 1-5%)</td>
            </tr>
            <tr>
                <td>Optimal Frequency Ratio</td>
                <td>\(f_{opt} = \frac{1}{1 + \mu}\)</td>
                <td>Ratio of TMD frequency to structure frequency for optimal tuning</td>
            </tr>
            <tr>
                <td>Optimal Damping Ratio</td>
                <td>\(\zeta_{opt} = \sqrt{\frac{3\mu}{8(1+\mu)^3}}\)</td>
                <td>Damping ratio that minimizes peak response</td>
            </tr>
            <tr>
                <td>TMD Natural Frequency</td>
                <td>\(\omega_{TMD} = \sqrt{\frac{k_{TMD}}{m_{TMD}}}\)</td>
                <td>Natural frequency of the TMD subsystem</td>
            </tr>
            <tr>
                <td>Vibration Reduction</td>
                <td>\(\text{Reduction} \approx \frac{\mu}{1 + \mu}\)</td>
                <td>Approximate amplitude reduction at resonance (up to 90% possible)</td>
            </tr>
        </table>
    </div>
</div>

<div class="content-section">
    <h2>Knowledge Check Quiz</h2>

    <div class="quiz-container">
        <div class="quiz-question">
            <p><strong>Question 1:</strong> What is the primary purpose of a Tuned Mass Damper?</p>
            <form id="q1">
                <input type="radio" id="q1a" name="q1" value="a">
                <label for="q1a">a) To increase the natural frequency of a structure</label><br>
                <input type="radio" id="q1b" name="q1" value="b">
                <label for="q1b">b) To absorb vibrational energy and reduce motion</label><br>
                <input type="radio" id="q1c" name="q1" value="c">
                <label for="q1c">c) To amplify structural vibrations</label><br>
                <input type="radio" id="q1d" name="q1" value="d">
                <label for="q1d">d) To eliminate all vibrations completely</label><br>
                <button type="button" onclick="checkAnswer('q1', 'b')">Check Answer</button>
            </form>
            <div id="q1-feedback" class="feedback"></div>
        </div>

        <div class="quiz-question">
            <p><strong>Question 2:</strong> For optimal TMD performance, what should the mass ratio μ typically be?</p>
            <form id="q2">
                <input type="radio" id="q2a" name="q2" value="a">
                <label for="q2a">a) 0.5 to 1.0</label><br>
                <input type="radio" id="q2b" name="q2" value="b">
                <label for="q2b">b) 0.1 to 0.3</label><br>
                <input type="radio" id="q2c" name="q2" value="c">
                <label for="q2c">c) 0.01 to 0.05</label><br>
                <input type="radio" id="q2d" name="q2" value="d">
                <label for="q2d">d) Greater than 1.0</label><br>
                <button type="button" onclick="checkAnswer('q2', 'c')">Check Answer</button>
            </form>
            <div id="q2-feedback" class="feedback"></div>
        </div>

        <div class="quiz-question">
            <p><strong>Question 3:</strong> How does a TMD reduce structural vibrations?</p>
            <form id="q3">
                <input type="radio" id="q3a" name="q3" value="a">
                <label for="q3a">a) By moving in phase with the structure</label><br>
                <input type="radio" id="q3b" name="q3" value="b">
                <label for="q3b">b) By moving out of phase to create an opposing force</label><br>
                <input type="radio" id="q3c" name="q3" value="c">
                <label for="q3c">c) By increasing structural stiffness</label><br>
                <input type="radio" id="q3d" name="q3" value="d">
                <label for="q3d">d) By locking the structure in place</label><br>
                <button type="button" onclick="checkAnswer('q3', 'b')">Check Answer</button>
            </form>
            <div id="q3-feedback" class="feedback"></div>
        </div>

        <div class="quiz-question">
            <p><strong>Question 4:</strong> What happens if a TMD is tuned slightly off the structural frequency?</p>
            <form id="q4">
                <input type="radio" id="q4a" name="q4" value="a">
                <label for="q4a">a) It becomes completely ineffective</label><br>
                <input type="radio" id="q4b" name="q4" value="b">
                <label for="q4b">b) It can still provide some vibration reduction but at reduced efficiency</label><br>
                <input type="radio" id="q4c" name="q4" value="c">
                <label for="q4c">c) It amplifies structural vibrations</label><br>
                <input type="radio" id="q4d" name="q4" value="d">
                <label for="q4d">d) It has no effect whatsoever</label><br>
                <button type="button" onclick="checkAnswer('q4', 'b')">Check Answer</button>
            </form>
            <div id="q4-feedback" class="feedback"></div>
        </div>

        <div class="quiz-question">
            <p><strong>Question 5:</strong> In the frequency response curve of a structure with a TMD, what characteristic feature indicates successful tuning?</p>
            <form id="q5">
                <input type="radio" id="q5a" name="q5" value="a">
                <label for="q5a">a) A single sharp resonance peak</label><br>
                <input type="radio" id="q5b" name="q5" value="b">
                <label for="q5b">b) Two smaller peaks with a valley between them (fixed points)</label><br>
                <input type="radio" id="q5c" name="q5" value="c">
                <label for="q5c">c) Complete elimination of all peaks</label><br>
                <input type="radio" id="q5d" name="q5" value="d">
                <label for="q5d">d) A shift of the peak to a higher frequency</label><br>
                <button type="button" onclick="checkAnswer('q5', 'b')">Check Answer</button>
            </form>
            <div id="q5-feedback" class="feedback"></div>
        </div>
    </div>
</div>

<script>
// toggleSolution function now loaded from /assets/common/problems.js
// checkAnswer function now loaded from /assets/common/quizzes.js
</script>

    <!-- Common JavaScript functions -->
    <script src="/assets/common/problems.js"></script>
    <script src="/assets/common/quizzes.js"></script>

</body>
<footer>
    <script src="/assets/common/footer.js"></script>
  </footer>
</html>