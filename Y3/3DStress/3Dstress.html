<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Stress-Strain Tensors - Interactive Lecture</title>
    <!-- Import p5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js"></script>
    <!-- Import MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Import Plotly for graphs -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Import custom CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/problems.css">
    <link rel="stylesheet" href="/assets/css/quizzes.css">
    <link rel="stylesheet" href="/assets/css/simulations.css">
    <link rel="stylesheet" href="/assets/css/uicontrols.css">
    <!-- Custom script -->
    <script src="3d-stress-strain.js"></script>

    <!-- Page-specific styles -->
    <style>
        /* Solution toggle styles specific to this page */
        .solution {
            display: none;
            background-color: #f9f9f9;
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin-top: 10px;
            border-radius: 0 4px 4px 0;
        }

        .solution-toggle {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 15px 0;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            display: inline-block;
        }

        .solution-toggle:hover {
            background-color: var(--primary-color);
        }

        /* Feedback styles specific to this page */
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }

        .feedback.correct {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .feedback.incorrect {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        /* Results panels specific to this page */
        .results-section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .result-panels {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .result-panel {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .result-panel h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #b38600;
        }

        .matrix {
            font-family: 'Courier New', monospace;
            white-space: pre;
            background-color: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        .plot-container {
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        #mohr-circle-3d {
            height: 400px;
            width: 100%;
        }

        .checkbox-container {
            margin-top: 10px;
        }

        .checkbox-container label {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Custom stress-colored sliders */
        /* Inherit all responsive behavior and sizing from uicontrols.css */
        /* Only override track and thumb colors for stress components */

        /* σ_xx (red) slider track */
        #sigma-xx::-webkit-slider-track {
            background: #ff0000 !important;
            border-color: #cc0000 !important;
        }
        #sigma-xx::-moz-range-track {
            background: #ff0000 !important;
            border-color: #cc0000 !important;
        }
        #sigma-xx:hover::-webkit-slider-track {
            background: #ff3333 !important;
            border-color: #cc0000 !important;
        }
        #sigma-xx::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #f00 !important;
        }
        #sigma-xx::-moz-range-thumb {
            background: #fff !important;
            border-color: #f00 !important;
        }

        /* σ_yy (blue) slider track */
        #sigma-yy::-webkit-slider-track {
            background: #0000ff !important;
            border-color: #0000cc !important;
        }
        #sigma-yy::-moz-range-track {
            background: #0000ff !important;
            border-color: #0000cc !important;
        }
        #sigma-yy:hover::-webkit-slider-track {
            background: #3333ff !important;
            border-color: #0000cc !important;
        }
        #sigma-yy::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #00f !important;
        }
        #sigma-yy::-moz-range-thumb {
            background: #fff !important;
            border-color: #00f !important;
        }

        /* σ_zz (green) slider track */
        #sigma-zz::-webkit-slider-track {
            background: #00bb00 !important;
            border-color: #008800 !important;
        }
        #sigma-zz::-moz-range-track {
            background: #00bb00 !important;
            border-color: #008800 !important;
        }
        #sigma-zz:hover::-webkit-slider-track {
            background: #00dd00 !important;
            border-color: #008800 !important;
        }
        #sigma-zz::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #0b0 !important;
        }
        #sigma-zz::-moz-range-thumb {
            background: #fff !important;
            border-color: #0b0 !important;
        }

        /* τ_xy (purple) slider track */
        #tau-xy::-webkit-slider-track {
            background: #ff00ff !important;
            border-color: #cc00cc !important;
        }
        #tau-xy::-moz-range-track {
            background: #ff00ff !important;
            border-color: #cc00cc !important;
        }
        #tau-xy:hover::-webkit-slider-track {
            background: #ff33ff !important;
            border-color: #cc00cc !important;
        }
        #tau-xy::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #f0f !important;
        }
        #tau-xy::-moz-range-thumb {
            background: #fff !important;
            border-color: #f0f !important;
        }

        /* τ_yz (cyan) slider track */
        #tau-yz::-webkit-slider-track {
            background: #00ffff !important;
            border-color: #00cccc !important;
        }
        #tau-yz::-moz-range-track {
            background: #00ffff !important;
            border-color: #00cccc !important;
        }
        #tau-yz:hover::-webkit-slider-track {
            background: #33ffff !important;
            border-color: #00cccc !important;
        }
        #tau-yz::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #0ff !important;
        }
        #tau-yz::-moz-range-thumb {
            background: #fff !important;
            border-color: #0ff !important;
        }

        /* τ_xz (muted yellow) slider track - more readable on white */
        #tau-xz::-webkit-slider-track {
            background: rgb(204, 170, 0) !important;
            border-color: #997700 !important;
        }
        #tau-xz::-moz-range-track {
            background: #ccaa00 !important;
            border-color: #997700 !important;
        }
        #tau-xz:hover::-webkit-slider-track {
            background: #ddbb00 !important;
            border-color: #997700 !important;
        }
        #tau-xz::-webkit-slider-thumb {
            background: #fff !important;
            border-color: #ccaa00 !important;
        }
        #tau-xz::-moz-range-thumb {
            background: #fff !important;
            border-color: #ccaa00 !important;
        }

        /* Compact 2-row layout: normal stresses on top, shear stresses on bottom */
        .simulation-section {
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .control-panel {
            padding: 15px !important;
            box-sizing: border-box !important;
            overflow-x: hidden;
            width: 100%;
        }

        .control-group {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .control-group h3 {
            margin-bottom: 15px;
        }

        /* Force 2-row layout at all screen sizes */
        .control-group > div[style*="grid"] {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 15px !important;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            padding: 0 !important;
        }

        /* Slider container - vertical layout with label on top */
        .slider-container {
            min-width: 0;
            display: flex !important;
            flex-direction: column !important;
            align-items: stretch !important;
            gap: 3px !important;
        }

        .slider-container label {
            display: block !important;
            text-align: center !important;
            margin: 0 0 3px 0 !important;
            white-space: nowrap !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
        }

        .slider-container input[type="range"] {
            width: 100% !important;
            max-width: 180px !important;
            margin: 0 auto !important;
        }

        .slider-container span {
            display: block !important;
            text-align: center !important;
            margin: 3px 0 0 0 !important;
            font-family: monospace !important;
        }

        /* Responsive adjustments - keep 3 columns but adjust sizing */
        @media (max-width: 900px) {
            .control-group > div[style*="grid"] {
                gap: 12px !important;
            }
        }

        @media (max-width: 768px) {
            .control-group > div[style*="grid"] {
                gap: 10px !important;
            }

            .slider-container label {
                font-size: 12px !important;
            }

            .slider-container span {
                font-size: 11px !important;
            }
        }

        /* Phone-specific: shorter sliders but keep large knobs */
        @media (max-width: 576px) {
            /* Override uicontrols.css padding on control-panel */
            .control-panel {
                padding: 8px !important;
            }

            .control-group > div[style*="grid"] {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 2px !important;
                column-gap: 2px !important;
            }

            /* Override uicontrols.css flex: 1 1 100% that breaks grid layout */
            .control-panel .slider-container {
                flex: initial !important;
                min-width: 0 !important;
            }

            .slider-container label {
                font-size: 9px !important;
            }

            .slider-container span {
                font-size: 9px !important;
            }

            /* Make sliders shorter (reduced width) on phones */
            .slider-container input[type="range"] {
                max-width: 90px !important;
                width: 100% !important;
            }
        }

        /* Add color to labels to match stress components */
        label[for="sigma-xx"] {
            color: #f00;
            font-weight: bold;
        }

        label[for="sigma-yy"] {
            color: #00f;
            font-weight: bold;
        }

        label[for="sigma-zz"] {
            color: #0b0;
            font-weight: bold;
        }

        label[for="tau-xy"] {
            color: #f0f;
            font-weight: bold;
        }

        label[for="tau-yz"] {
            color: #0ff;
            font-weight: bold;
        }

        label[for="tau-xz"] {
            color: #ccaa00;
            font-weight: bold;
        }

        /* Value display with matching colors */
        #sigma-xx-value {
            color: #f00;
            font-weight: bold;
        }

        #sigma-yy-value {
            color: #00f;
            font-weight: bold;
        }

        #sigma-zz-value {
            color: #0b0;
            font-weight: bold;
        }

        #tau-xy-value {
            color: #f0f;
            font-weight: bold;
        }

        #tau-yz-value {
            color: #0ff;
            font-weight: bold;
        }

        #tau-xz-value {
            color: #ccaa00;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <header>
        <h1>3D Stress-Strain Tensors and Transformations</h1>
        <p class="subtitle">Interactive Lecture & Simulation</p>
    </header>

    <div class="container" style="grid-template-columns:1fr">
        <div class="simulation-section">
            <h2>Interactive 3D Stress Visualisation</h2>
                                    <div class="control-group">
                    <div class="button-container">
                        <button id="reset-view">Reset View</button>
                        <button id="toggle-rotation">Stop Rotation</button>
                        <button id="toggle-principal">Show Principal Stresses</button>
                        <label><input type="checkbox" id="show-deformation" checked> Show deformation</label>
                    </div>
                </div>
            <div id="sketch-holder">
                <!-- Our p5.js sketch will go here -->
            </div>
            
            <div class="control-panel">
                <div class="control-group">
                    <h5>Stress Components (MPa)</h5>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 10px;">
                        <div class="slider-container" style="margin: 0;">
                            <label for="sigma-xx" style="display: block; margin-bottom: 5px;">σ<sub>xx</sub></label>
                            <input type="range" id="sigma-xx" min="-100" max="100" value="50" class="slider" style="width: 100%;">
                            <span id="sigma-xx-value" style="display: block; text-align: center; margin-top: 3px;">50</span>
                        </div>
                        <div class="slider-container" style="margin: 0;">
                            <label for="sigma-yy" style="display: block; margin-bottom: 5px;">σ<sub>yy</sub></label>
                            <input type="range" id="sigma-yy" min="-100" max="100" value="30" class="slider" style="width: 100%;">
                            <span id="sigma-yy-value" style="display: block; text-align: center; margin-top: 3px;">30</span>
                        </div>
                        <div class="slider-container" style="margin: 0;">
                            <label for="sigma-zz" style="display: block; margin-bottom: 5px;">σ<sub>zz</sub></label>
                            <input type="range" id="sigma-zz" min="-100" max="100" value="10" class="slider" style="width: 100%;">
                            <span id="sigma-zz-value" style="display: block; text-align: center; margin-top: 3px;">10</span>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                        <div class="slider-container" style="margin: 0;">
                            <label for="tau-xy" style="display: block; margin-bottom: 5px;">τ<sub>xy</sub></label>
                            <input type="range" id="tau-xy" min="-50" max="50" value="15" class="slider" style="width: 100%;">
                            <span id="tau-xy-value" style="display: block; text-align: center; margin-top: 3px;">15</span>
                        </div>
                        <div class="slider-container" style="margin: 0;">
                            <label for="tau-yz" style="display: block; margin-bottom: 5px;">τ<sub>yz</sub></label>
                            <input type="range" id="tau-yz" min="-50" max="50" value="5" class="slider" style="width: 100%;">
                            <span id="tau-yz-value" style="display: block; text-align: center; margin-top: 3px;">5</span>
                        </div>
                        <div class="slider-container" style="margin: 0;">
                            <label for="tau-xz" style="display: block; margin-bottom: 5px;">τ<sub>xz</sub></label>
                            <input type="range" id="tau-xz" min="-50" max="50" value="10" class="slider" style="width: 100%;">
                            <span id="tau-xz-value" style="display: block; text-align: center; margin-top: 3px;">10</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="results-section">
            <h2>Calculation Results</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div class="result-panel" style="background-color: #e6f7ff; border-left: 4px solid #1890ff;">
                    <h3 style="color: #1890ff; margin-top: 0;">Stress State & Principal Analysis</h3>
                    <h4 style="margin-top: 15px; margin-bottom: 8px; font-size: 14px;">Stress Tensor (MPa)</h4>
                    <div id="stress-matrix" class="matrix" style="font-size: 12px;"></div>
                    <h4 style="margin-top: 15px; margin-bottom: 8px; font-size: 14px;">Principal Stresses</h4>
                    <div id="principal-stresses" style="font-size: 13px;"></div>
                    <h4 style="margin-top: 15px; margin-bottom: 8px; font-size: 14px;">Principal Directions</h4>
                    <div id="principal-directions" class="matrix" style="font-size: 12px;"></div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div class="result-panel" style="background-color: #e6f7ff; border-left: 4px solid #1890ff;">
                        <h3 style="color: #1890ff; margin-top: 0;">Equivalent Failure Stresses (\(σ_Y\) = 110 MPa)</h3>
                        <div id="failure-criteria" style="font-size: 13px;"></div>
                    </div>
                    <div class="plot-container" style="flex-grow: 1;">
                        <div id="mohr-circle-3d" style="height: 100%;">
                            <!-- 3D Mohr's Circle plot will go here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>3D Stress and Strain Theory</h2>
            
            <section id="cauchy-stress">
                <h3>Cauchy Stress Tensor</h3>
                <p>The Cauchy stress tensor is a second-order tensor used to represent the state of stress at a point within a material. In three dimensions, it is represented as a 3×3 matrix:</p>
                <div class="equation-box">
                    \[\boldsymbol{\sigma} = \begin{bmatrix} 
                    \sigma_{xx} & \tau_{xy} & \tau_{xz} \\
                    \tau_{yx} & \sigma_{yy} & \tau_{yz} \\
                    \tau_{zx} & \tau_{zy} & \sigma_{zz}
                    \end{bmatrix}\]
                </div>
                <p>Where:</p>
                <ul>
                    <li>σ<sub>xx</sub>, σ<sub>yy</sub>, σ<sub>zz</sub> are normal stresses</li>
                    <li>τ<sub>xy</sub>, τ<sub>yz</sub>, τ<sub>xz</sub>, τ<sub>yx</sub>, τ<sub>zy</sub>, τ<sub>zx</sub> are shear stresses</li>
                </ul>
                <p>Due to moment equilibrium, the stress tensor is symmetric, meaning τ<sub>ij</sub> = τ<sub>ji</sub>.</p>
                
                <div class="key-point">
                    <p>The stress tensor completely defines the state of stress at a point. Each component represents the stress (force per unit area) acting on a plane perpendicular to one axis in the direction of another axis.</p>
                </div>
            </section>
            
            <section id="green-strain">
                <h3>Green-Lagrange Strain Tensor</h3>
                <p>The Green-Lagrange strain tensor describes the deformation of a material from an initial to a deformed state. For small strains, it simplifies to the infinitesimal strain tensor:</p>
                <div class="equation-box">
                    \[\boldsymbol{\varepsilon} = \begin{bmatrix} 
                    \varepsilon_{xx} & \gamma_{xy}/2 & \gamma_{xz}/2 \\
                    \gamma_{xy}/2 & \varepsilon_{yy} & \gamma_{yz}/2 \\
                    \gamma_{xz}/2 & \gamma_{yz}/2 & \varepsilon_{zz}
                    \end{bmatrix}\]
                </div>
                <p>Where ε represents normal strains and γ represents engineering shear strains.</p>
            </section>
            
            <section id="failure-criteria">
                <h3>Failure Criteria</h3>
                <p>Several criteria predict material failure under complex stress states:</p>
                
                <h4>Von Mises Criterion</h4>
                <div class="equation-box">
                    \[\sigma_{VM} = \sqrt{\frac{1}{2}[(σ_1-σ_2)^2 + (σ_2-σ_3)^2 + (σ_3-σ_1)^2]}\]
                </div>
                <p>Failure occurs when σ<sub>VM</sub> ≥ σ<sub>y</sub> (yield strength)</p>
                
                <h4>Tresca Criterion</h4>
                <div class="equation-box">
                    \[\tau_{max} = \frac{σ_{max} - σ_{min}}{2}\]
                </div>
                <p>Failure occurs when τ<sub>max</sub> ≥ σ<sub>y</sub>/2</p>
                
                <div class="key-point">
                    <p>The von Mises criterion is based on distortion energy theory and is widely used for ductile materials. The Tresca criterion is more conservative than von Mises but simpler to calculate.</p>
                </div>
            </section>
        </div>

        <div class="content-section">
            <h2>Applications and Examples</h2>
            <p>Three-dimensional stress analysis is critical for complex structural and mechanical components:</p>
            <ul>
                <li><strong>Pressure Vessels:</strong> Thick-walled cylinders and spheres require 3D stress analysis to ensure safety under internal pressure.</li>
                <li><strong>Aerospace Components:</strong> Turbine blades, landing gear, and fuselage joints experience complex 3D stress states requiring full tensor analysis.</li>
                <li><strong>Geotechnical Engineering:</strong> Soil and rock mechanics use 3D stress analysis for foundation design and slope stability.</li>
                <li><strong>Nuclear Engineering:</strong> Reactor vessels and piping systems under thermal and pressure loads require 3D stress evaluation.</li>
                <li><strong>Manufacturing:</strong> Metal forming processes like forging and extrusion involve 3D stress states that govern material flow and failure.</li>
                <li><strong>Biomechanics:</strong> Bone and joint analysis requires 3D stress tensor calculations to understand load distribution and injury mechanisms.</li>
            </ul>
        </div>

        <!-- PRACTICE PROBLEMS SECTION -->
        <div class="content-section">
            <h2>Practice Problems</h2>

            <div class="practice-problems">
                <h3>Problem 1: Principal Stress Analysis in 3D</h3>
                <p>A stress state at a point in a material is given by the following stress tensor:</p>
                <p>\[[\sigma] = \begin{bmatrix} 60 & 20 & 0 \\ 20 & 40 & 0 \\ 0 & 0 & 30 \end{bmatrix} \text{ MPa}\]</p>
                <p>Determine:</p>
                <ol type="a">
                    <li>The three principal stresses σ₁, σ₂, and σ₃</li>
                    <li>The maximum shear stress</li>
                    <li>The hydrostatic (mean) stress</li>
                </ol>

                <p class="toggle-section" onclick="toggleSolution('solution1')">Show Solution</p>
                <div id="solution1" class="hidden">
                    
                    <p><strong>(a) Principal stresses:</strong></p>
                    <p>For the given stress tensor, since σ₃₃ = 30 MPa has no coupling with the other components (σ₁₃ = σ₂₃ = 0), one principal stress is σ₃ = 30 MPa.</p>

                    <p>For the remaining 2×2 submatrix in the xy-plane:</p>
                    <p>\[\begin{bmatrix} 60 & 20 \\ 20 & 40 \end{bmatrix}\]</p>

                    <p>Average stress: \(\sigma_{avg} = \frac{60 + 40}{2} = 50\) MPa</p>
                    <p>Radius: \(R = \sqrt{(60-40)^2/4 + 20^2} = \sqrt{100 + 400} = \sqrt{500} = 22.36\) MPa</p>

                    <p>\[\sigma_1 = 50 + 22.36 = 72.36 \text{ MPa}\]</p>
                    <p>\[\sigma_2 = 50 - 22.36 = 27.64 \text{ MPa}\]</p>
                    <p>\[\sigma_3 = 30 \text{ MPa}\]</p>

                    <p>Ordered: σ₁ = 72.36 MPa, σ₂ = 30 MPa, σ₃ = 27.64 MPa</p>

                    <p><strong>(b) Maximum shear stress:</strong></p>
                    <p>\[\tau_{max} = \frac{\sigma_1 - \sigma_3}{2} = \frac{72.36 - 27.64}{2} = 22.36 \text{ MPa}\]</p>

                    <p><strong>(c) Hydrostatic stress:</strong></p>
                    <p>\[\sigma_m = \frac{\sigma_1 + \sigma_2 + \sigma_3}{3} = \frac{72.36 + 30 + 27.64}{3} = \frac{130}{3} = 43.33 \text{ MPa}\]</p>
                </div>
            </div>

            <div class="practice-problems">
                <h3>Problem 2: Stress Invariants and Deviatoric Stress</h3>
                <p>Given the stress tensor from Problem 1, calculate:</p>
                <ol type="a">
                    <li>The three stress invariants I₁, I₂, and I₃</li>
                    <li>The deviatoric stress tensor</li>
                    <li>The von Mises equivalent stress</li>
                </ol>

                <p class="toggle-section" onclick="toggleSolution('solution2')">Show Solution</p>
                <div id="solution2" class="hidden">
                    
                    <p><strong>(a) Stress invariants:</strong></p>
                    <p>First invariant (trace):</p>
                    <p>\[I_1 = \sigma_{11} + \sigma_{22} + \sigma_{33} = 60 + 40 + 30 = 130 \text{ MPa}\]</p>

                    <p>Using principal stresses (easier): \(I_1 = 72.36 + 30 + 27.64 = 130\) MPa ✓</p>

                    <p>Second invariant:</p>
                    <p>\[I_2 = \sigma_1\sigma_2 + \sigma_2\sigma_3 + \sigma_3\sigma_1 = 72.36 \times 30 + 30 \times 27.64 + 27.64 \times 72.36\]</p>
                    <p>\[I_2 = 2170.8 + 829.2 + 2000 = 5000 \text{ MPa}^2\]</p>

                    <p>Third invariant (determinant):</p>
                    <p>\[I_3 = \sigma_1\sigma_2\sigma_3 = 72.36 \times 30 \times 27.64 = 60,000 \text{ MPa}^3\]</p>

                    <p><strong>(b) Deviatoric stress tensor:</strong></p>
                    <p>Hydrostatic component: \(\sigma_m = I_1/3 = 43.33\) MPa</p>
                    <p>\[[s] = [\sigma] - \sigma_m[I] = \begin{bmatrix} 60-43.33 & 20 & 0 \\ 20 & 40-43.33 & 0 \\ 0 & 0 & 30-43.33 \end{bmatrix}\]</p>
                    <p>\[[s] = \begin{bmatrix} 16.67 & 20 & 0 \\ 20 & -3.33 & 0 \\ 0 & 0 & -13.33 \end{bmatrix} \text{ MPa}\]</p>

                    <p><strong>(c) Von Mises equivalent stress:</strong></p>
                    <p>\[\sigma_{VM} = \sqrt{\frac{1}{2}[(\sigma_1-\sigma_2)^2 + (\sigma_2-\sigma_3)^2 + (\sigma_3-\sigma_1)^2]}\]</p>
                    <p>\[\sigma_{VM} = \sqrt{\frac{1}{2}[(72.36-30)^2 + (30-27.64)^2 + (27.64-72.36)^2]}\]</p>
                    <p>\[\sigma_{VM} = \sqrt{\frac{1}{2}[1794.5 + 5.57 + 1999.7]} = \sqrt{1899.9} = 43.59 \text{ MPa}\]</p>
                </div>
            </div>

            <div class="practice-problems">
                <h3>Problem 3: 3D Mohr's Circle Analysis</h3>
                <p>A material is subjected to the following principal stresses:</p>
                <ul>
                    <li>σ₁ = 100 MPa (maximum)</li>
                    <li>σ₂ = 40 MPa (intermediate)</li>
                    <li>σ₃ = -20 MPa (minimum, compression)</li>
                </ul>
                <p>Using the concept of 3D Mohr's circles, determine:</p>
                <ol type="a">
                    <li>The radii of the three Mohr's circles</li>
                    <li>The absolute maximum shear stress</li>
                    <li>The minimum normal stress on any plane</li>
                    <li>If the material has a yield strength of 200 MPa, calculate the factor of safety using the Tresca and von Mises criteria</li>
                </ol>

                <p class="toggle-section" onclick="toggleSolution('solution3')">Show Solution</p>
                <div id="solution3" class="hidden">
                    
                    <p><strong>(a) Radii of three Mohr's circles:</strong></p>
                    <p>Circle 1 (largest, between σ₁ and σ₃):</p>
                    <p>\[R_1 = \frac{\sigma_1 - \sigma_3}{2} = \frac{100 - (-20)}{2} = 60 \text{ MPa}\]</p>

                    <p>Circle 2 (between σ₁ and σ₂):</p>
                    <p>\[R_2 = \frac{\sigma_1 - \sigma_2}{2} = \frac{100 - 40}{2} = 30 \text{ MPa}\]</p>

                    <p>Circle 3 (between σ₂ and σ₃):</p>
                    <p>\[R_3 = \frac{\sigma_2 - \sigma_3}{2} = \frac{40 - (-20)}{2} = 30 \text{ MPa}\]</p>

                    <p><strong>(b) Absolute maximum shear stress:</strong></p>
                    <p>\[\tau_{max} = R_1 = 60 \text{ MPa}\]</p>
                    <p>This occurs on planes at 45° to the σ₁ and σ₃ principal directions.</p>

                    <p><strong>(c) Minimum normal stress:</strong></p>
                    <p>The minimum normal stress on any plane is the smallest principal stress:</p>
                    <p>\[\sigma_{min} = \sigma_3 = -20 \text{ MPa (compression)}\]</p>

                    <p><strong>(d) Factor of safety:</strong></p>
                    <p><em>Tresca (Maximum Shear Stress) Criterion:</em></p>
                    <p>\[\sigma_{eq,Tresca} = \sigma_1 - \sigma_3 = 100 - (-20) = 120 \text{ MPa}\]</p>
                    <p>\[FS_{Tresca} = \frac{\sigma_y}{\sigma_{eq}} = \frac{200}{120} = 1.67\]</p>

                    <p><em>Von Mises Criterion:</em></p>
                    <p>\[\sigma_{VM} = \sqrt{\frac{1}{2}[(100-40)^2 + (40-(-20))^2 + ((-20)-100)^2]}\]</p>
                    <p>\[\sigma_{VM} = \sqrt{\frac{1}{2}[3600 + 3600 + 14400]} = \sqrt{10800} = 103.92 \text{ MPa}\]</p>
                    <p>\[FS_{vonMises} = \frac{200}{103.92} = 1.92\]</p>

                    <p><strong>Interpretation:</strong> The von Mises criterion predicts a higher factor of safety (1.92 vs 1.67) because it accounts for all stress components more accurately. The Tresca criterion is more conservative.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>Summary of Key Equations</h2>
            <div class="equation-box">
                <table>
                    <tr>
                        <th>Concept</th>
                        <th>Equation</th>
                        <th>Description</th>
                    </tr>
                    <tr>
                        <td>Stress Tensor</td>
                        <td>\(\boldsymbol{\sigma} = \begin{bmatrix} \sigma_{xx} & \tau_{xy} & \tau_{xz} \\ \tau_{yx} & \sigma_{yy} & \tau_{yz} \\ \tau_{zx} & \tau_{zy} & \sigma_{zz} \end{bmatrix}\)</td>
                        <td>3D stress state</td>
                    </tr>
                    <tr>
                        <td>Principal Stresses</td>
                        <td>\(\det(\boldsymbol{\sigma} - \sigma\mathbf{I}) = 0\)</td>
                        <td>Eigenvalue problem</td>
                    </tr>
                    <tr>
                        <td>Hydrostatic Stress</td>
                        <td>\(\sigma_m = \frac{\sigma_1 + \sigma_2 + \sigma_3}{3}\)</td>
                        <td>Mean normal stress</td>
                    </tr>
                    <tr>
                        <td>Von Mises Stress</td>
                        <td>\(\sigma_{VM} = \sqrt{\frac{1}{2}[(\sigma_1-\sigma_2)^2+(\sigma_2-\sigma_3)^2+(\sigma_3-\sigma_1)^2]}\)</td>
                        <td>Equivalent stress</td>
                    </tr>
                    <tr>
                        <td>Octahedral Shear</td>
                        <td>\(\tau_{oct} = \frac{1}{3}\sqrt{(\sigma_1-\sigma_2)^2+(\sigma_2-\sigma_3)^2+(\sigma_3-\sigma_1)^2}\)</td>
                        <td>Shear stress on octahedral plane</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="quiz-section">
            <h2>Knowledge Check Quiz</h2>
            
            <div class="quiz-container">
                <div class="quiz-question">
                    <h3>Question 1: Which of the following statements about the Cauchy stress tensor is FALSE?</h3>
                    <div class="quiz-options">
                        <label><input type="radio" name="q1" value="a"> a) It is a second-order tensor represented as a 3×3 matrix</label>
                        <label><input type="radio" name="q1" value="b"> b) It must be symmetric due to moment equilibrium</label>
                        <label><input type="radio" name="q1" value="c"> c) The diagonal elements represent shear stresses</label>
                        <label><input type="radio" name="q1" value="d"> d) It completely defines the state of stress at a point</label>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Question 2: According to the von Mises failure criterion, failure occurs when:</h3>
                    <div class="quiz-options">
                        <label><input type="radio" name="q2" value="a"> a) The maximum principal stress reaches the yield strength</label>
                        <label><input type="radio" name="q2" value="b"> b) The maximum shear stress reaches half the yield strength</label>
                        <label><input type="radio" name="q2" value="c"> c) The distortion energy reaches a critical value</label>
                        <label><input type="radio" name="q2" value="d"> d) The normal stress equals the shear stress</label>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Question 3: Which of the following material models requires the fewest independent elastic constants to fully characterise its behaviour?</h3>
                    <div class="quiz-options">
                        <label><input type="radio" name="q3" value="a"> a) Anisotropic</label>
                        <label><input type="radio" name="q3" value="b"> b) Orthotropic</label>
                        <label><input type="radio" name="q3" value="c"> c) Transversely isotropic</label>
                        <label><input type="radio" name="q3" value="d"> d) Isotropic</label>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Question 4: Principal stresses are:</h3>
                    <div class="quiz-options">
                        <label><input type="radio" name="q4" value="a"> a) Always equal to the normal stresses in the original coordinate system</label>
                        <label><input type="radio" name="q4" value="b"> b) The eigenvalues of the stress tensor</label>
                        <label><input type="radio" name="q4" value="c"> c) Always positive values regardless of the stress state</label>
                        <label><input type="radio" name="q4" value="d"> d) The maximum shear stresses in the material</label>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h3>Question 5: For a state of stress with principal stresses σ₁ = 200 MPa, σ₂ = 100 MPa, and σ₃ = 50 MPa, the maximum shear stress is:</h3>
                    <div class="quiz-options">
                        <label><input type="radio" name="q5" value="a"> a) 75 MPa</label>
                        <label><input type="radio" name="q5" value="b"> b) 150 MPa</label>
                        <label><input type="radio" name="q5" value="c"> c) 50 MPa</label>
                        <label><input type="radio" name="q5" value="d"> d) 200 MPa</label>
                    </div>
                </div>
                
                <button id="submit-quiz">Submit Quiz</button>
                <div id="quiz-results"></div>
            </div>
        </div>
    </div>

    <script>
        // Quiz handler for 3D Stress
        document.getElementById('submit-quiz').addEventListener('click', function() {
            const answers = {
                q1: 'c',  // Diagonal elements are normal stresses (not shear)
                q2: 'c',  // Von Mises based on distortion energy
                q3: 'd',  // Isotropic needs fewest constants (2: E and ν)
                q4: 'b',  // Hydrostatic pressure state
                q5: 'c'   // Tensor transformation under rotation
            };

            let score = 0;
            let totalQuestions = Object.keys(answers).length;
            let resultsHTML = '<h3>Quiz Results:</h3>';

            for (let question in answers) {
                const selectedOption = document.querySelector(`input[name="${question}"]:checked`);
                const correctAnswer = answers[question];

                if (selectedOption) {
                    if (selectedOption.value === correctAnswer) {
                        score++;
                        resultsHTML += `<p style="color: #28a745; font-weight: bold;">${question.toUpperCase()}: Correct! ✓</p>`;
                    } else {
                        resultsHTML += `<p style="color: #dc3545; font-weight: bold;">${question.toUpperCase()}: Incorrect ✗</p>`;
                    }
                } else {
                    resultsHTML += `<p style="color: #333;">${question.toUpperCase()}: Not answered</p>`;
                }
            }

            const percentage = ((score / totalQuestions) * 100).toFixed(0);
            resultsHTML = `<p style="font-size: 1.2em; font-weight: bold;">You scored ${score} out of ${totalQuestions} (${percentage}%)</p>` + resultsHTML;

            document.getElementById('quiz-results').innerHTML = resultsHTML;
        });
    </script>

    <!-- Common JavaScript functions -->
    <script src="/assets/common/problems.js"></script>
    <script src="/assets/common/quizzes.js"></script>
</body>
<footer>
    <script src="/assets/common/footer.js"></script>
  </footer>
</html>